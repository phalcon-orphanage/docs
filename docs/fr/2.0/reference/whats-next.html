
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Améliorer les performances : C’est quoi la suite ? &mdash; Phalcon 1.3.0 documentation</title>
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/docs.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 1.3.0 documentation" href="../index.html" />
    <link rel="next" title="API Indice" href="../api/index.html" />
    <link rel="prev" title="Phalcon Developer Tools on Linux" href="linuxtools.html" /> 
  </head>
  <body>
    <div id="wrapper">

        <div class="size-wrap">

            <div class="header clear-fix">
                <a class="header-logo" href="http://phalconphp.com"><span class="logo-text">Phalcon</span></a>
                <div class="header-right">
                    <iframe src="http://ghbtns.com/github-btn.html?user=phalcon&amp;repo=cphalcon&amp;type=watch&amp;count=true&amp;size=large"
allowtransparency="true" frameborder="0" scrolling="0" width="152px" height="30px"></iframe>
                </div>
                <ul class="header-nav">
                    <li><a href="http://phalconphp.com/" class="header-nav-link">Home</a></li>
                    <li><a href="http://phalconphp.com/download" class="header-nav-link">Download</a></li>
                    <li><a href="http://forum.phalconphp.com/" class="header-nav-link active">Forum</a></li>
                    <li><a href="http://blog.phalconphp.com/" class="header-nav-link">Blog</a></li>
                    <li><a href="http://phalconphp.com/support" class="header-nav-link">Support</a></li>
                    <li><a href="http://store.phalconphp.com/" class="header-nav-link">Store</a></li>
                    <li><a href="https://github.com/phalcon/cphalcon" class="header-nav-link">GitHub</a></li>
                </ul>
            </div>

        </div>
    <div class="header-line">
      <div class="size-wrap">
        <div class="header-line-title title-white">Documentation</div>
      </div>
    </div>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Index général"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../api/index.html" title="API Indice"
             accesskey="N">suivant</a> |</li>
        <li class="right" >
          <a href="linuxtools.html" title="Phalcon Developer Tools on Linux"
             accesskey="P">précédent</a> |</li>
        <li><a href="http://phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 1.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            <div>
            <div id="searchbox" style="">
                <!--<form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="25" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>-->
                <div style="width:200px;padding:10px">
                  <gcse:searchbox-only></gcse:searchbox-only>
                </div>
                <hr>
            </div>
            </div>
            <div style="padding:5px;padding-left:10px">
              <div id="carbonads-container">
                <div class="carbonad"><div id="azcarbon"></div>
                <script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/56496/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script>
                </div></div>
            </div>
            <h3><a href="../index.html">Table des matières</a></h3>
            <ul>
<li><a class="reference internal" href="#">Améliorer les performances : C&#8217;est quoi la suite ?</a><ul>
<li><a class="reference internal" href="#profilage-du-server">Profilage du Server</a><ul>
<li><a class="reference internal" href="#profilage-avec-xdebug">Profilage avec XDebug</a></li>
<li><a class="reference internal" href="#profilage-avec-xhprof">Profilage avec Xhprof</a></li>
<li><a class="reference internal" href="#profilage-des-requete-sql">Profilage des requête SQL</a></li>
</ul>
</li>
<li><a class="reference internal" href="#profilage-cote-client">Profilage côté Client</a><ul>
<li><a class="reference internal" href="#profilage-avec-chrome-firefox">Profilage avec Chrome/Firefox</a></li>
</ul>
</li>
<li><a class="reference internal" href="#yahoo-yslow">Yahoo! YSlow</a><ul>
<li><a class="reference internal" href="#profilage-avec-speed-tracer">Profilage avec Speed Tracer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#utiliser-une-version-recente-de-php">Utiliser une version récente de PHP</a></li>
<li><a class="reference internal" href="#utiliser-un-cache-php-bytecode">Utiliser un cache PHP Bytecode</a></li>
<li><a class="reference internal" href="#mettez-le-travail-lent-en-tache-de-fond">Mettez le travail lent en tâche de fond</a></li>
<li><a class="reference internal" href="#google-page-speed">Google Page Speed</a></li>
</ul>
</li>
</ul>

            <h4>Sujet précédent</h4>
            <p class="topless"><a href="linuxtools.html" title="Chapitre précédent">&lt; Phalcon Developer Tools on Linux</a></p>
            <h4>Sujet suivant</h4>
            <p class="topless"><a href="../api/index.html" title="Chapitre suivant">API Indice &gt;</a></p>
            <h3>Cette page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/whats-next.txt" rel="nofollow">Montrer la source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <p>Attention: Cette documentation est incomplète.</p>
<div class="section" id="ameliorer-les-performances-c-est-quoi-la-suite">
<h1>Améliorer les performances : C&#8217;est quoi la suite ?<a class="headerlink" href="#ameliorer-les-performances-c-est-quoi-la-suite" title="Lien permanent vers ce titre">¶</a></h1>
<p>Avoir des applications plus rapides nécessite l&#8217;amélioration de différents composants : Le serveur, le client, le réseau
la base de données, le serveur web, les sources statiques, etc.
Dans ce chapitre nous avons sélectionné des scénarios où l&#8217;on pourra améliorer les performances et où nous verrons comment voir ce qui
ralentit notre application.</p>
<div class="section" id="profilage-du-server">
<h2>Profilage du Server<a class="headerlink" href="#profilage-du-server" title="Lien permanent vers ce titre">¶</a></h2>
<p>Chaque application est différente, le profilage (l&#8217;analyse) constante est importante pour comprendre où les performances peuvent être améliorés.
Le profilage nous permet d&#8217;avoir une idée réelle de ce qui est lent et de ce qui ne l&#8217;est pas. Chaque analyse varie en fonction des requêtes, donc
il est important de faire assez de mesures pour obtenir des conclusions efficace.</p>
<div class="section" id="profilage-avec-xdebug">
<h3>Profilage avec XDebug<a class="headerlink" href="#profilage-avec-xdebug" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="http://xdebug.org/docs">Xdebug</a> nous fournit un moyen simple d&#8217;analyser des applications php, il suffit d&#8217;installer l&#8217;extension et d&#8217;autoriser le profilage dans php.ini :</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">xdebug.profiler_enable</span> <span class="o">=</span> <span class="s">On</span>
</pre></div>
</div>
<p>En utilisant un outils comme <a class="reference external" href="http://github.com/jokkedk/webgrind/">Webgrind</a> on peux voir quelles fonctions/méthodes sont lentes par rapport aux autres :</p>
<div class="figure align-center">
<img alt="../_images/webgrind.jpg" src="../_images/webgrind.jpg" />
</div>
</div>
<div class="section" id="profilage-avec-xhprof">
<h3>Profilage avec Xhprof<a class="headerlink" href="#profilage-avec-xhprof" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://github.com/facebook/xhprof">Xhprof</a> est une autre extension intéressante pour l&#8217;analyse d&#8217;applications php.
Ajoutez le code suivant au début du fichier index.php (le fichier bootstrap qui se trouve normalement dans public/) :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nx">xhprof_enable</span><span class="p">(</span><span class="nx">XHPROF_FLAGS_CPU</span> <span class="o">+</span> <span class="nx">XHPROF_FLAGS_MEMORY</span><span class="p">);</span>
</pre></div>
</div>
<p>Puis à la fin de ce même fichier, ajoutez ceci :</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$xhprof_data</span> <span class="o">=</span> <span class="nx">xhprof_disable</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">);</span>

<span class="nv">$XHPROF_ROOT</span> <span class="o">=</span> <span class="s2">&quot;/var/www/xhprof/&quot;</span><span class="p">;</span>
<span class="k">include_once</span> <span class="nv">$XHPROF_ROOT</span> <span class="o">.</span> <span class="s2">&quot;/xhprof_lib/utils/xhprof_lib.php&quot;</span><span class="p">;</span>
<span class="k">include_once</span> <span class="nv">$XHPROF_ROOT</span> <span class="o">.</span> <span class="s2">&quot;/xhprof_lib/utils/xhprof_runs.php&quot;</span><span class="p">;</span>

<span class="nv">$xhprof_runs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XHProfRuns_Default</span><span class="p">();</span>
<span class="nv">$run_id</span> <span class="o">=</span> <span class="nv">$xhprof_runs</span><span class="o">-&gt;</span><span class="na">save_run</span><span class="p">(</span><span class="nv">$xhprof_data</span><span class="p">,</span> <span class="s2">&quot;xhprof_testing&quot;</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;http://localhost/xhprof/xhprof_html/index.php?run=</span><span class="si">{</span><span class="nv">$run_id</span><span class="si">}</span><span class="s2">&amp;source=xhprof_testing</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Xhprof fournit un aperçu en html pour analyser les données récupérés :</p>
<div class="figure align-center">
<img alt="../_images/xhprof-2.jpg" src="../_images/xhprof-2.jpg" />
</div>
<div class="figure align-center">
<img alt="../_images/xhprof-1.jpg" src="../_images/xhprof-1.jpg" />
</div>
</div>
<div class="section" id="profilage-des-requete-sql">
<h3>Profilage des requête SQL<a class="headerlink" href="#profilage-des-requete-sql" title="Lien permanent vers ce titre">¶</a></h3>
<p>La plupart des bases de données fournissent des outils pour identifier les requêtes lourdes. Détecter et corriger ces requêtes est très important pour améliorer les performances
du côté serveur. Dans le cas de MySQL, vous pouvez utiliser les &#8220;slow queries logs&#8221; (logs de requêtes lentes) pour savoir quelles requêtes prennent plus de temps que prévu :</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">log-slow-queries</span> <span class="o">=</span> <span class="s">/var/log/slow-queries.log</span>
<span class="na">long_query_time</span> <span class="o">=</span> <span class="s">1.5</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="profilage-cote-client">
<h2>Profilage côté Client<a class="headerlink" href="#profilage-cote-client" title="Lien permanent vers ce titre">¶</a></h2>
<p>Des fois, on as besoin d&#8217;améliorer le chargement des éléments statiques comme des images, du javascript et du CSS pour améliorer les performances.
Les outils suivants sont très utiles pour détecter les goulot d&#8217;étranglement du côté client :</p>
<div class="section" id="profilage-avec-chrome-firefox">
<h3>Profilage avec Chrome/Firefox<a class="headerlink" href="#profilage-avec-chrome-firefox" title="Lien permanent vers ce titre">¶</a></h3>
<p>La plupart des navigateurs modernes ont des outils pour profiler le chargement des pages. Dans chrome vous pouvez utiliser l&#8217;inspecteur d&#8217;élément
pour savoir ce qui prends du temps à charger sur une page.</p>
<div class="figure align-center">
<img alt="../_images/chrome-1.jpg" src="../_images/chrome-1.jpg" />
</div>
<p><a class="reference external" href="http://getfirebug.com/">Firebug</a> fournit les mêmes fonctionnalités sous firefox :</p>
<div class="figure align-center">
<img alt="../_images/firefox-1.jpg" src="../_images/firefox-1.jpg" />
</div>
</div>
</div>
<div class="section" id="yahoo-yslow">
<h2>Yahoo! YSlow<a class="headerlink" href="#yahoo-yslow" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://developer.yahoo.com/yslow/">YSlow</a>  analyse les pages web et suggère des moyens d&#8217;améliorer les performances en fonction d&#8217;un ensemble de <a class="reference external" href="http://developer.yahoo.com/performance/rules.html">règles pour des pages de hautes performances</a></p>
<div class="figure align-center">
<img alt="../_images/yslow-1.jpg" src="../_images/yslow-1.jpg" />
</div>
<div class="section" id="profilage-avec-speed-tracer">
<h3>Profilage avec Speed Tracer<a class="headerlink" href="#profilage-avec-speed-tracer" title="Lien permanent vers ce titre">¶</a></h3>
<p><a class="reference external" href="https://developers.google.com/web-toolkit/speedtracer/">Speed Tracer</a> is a tool to help you identify and fix performance problems in your web applications.
It visualizes metrics that are taken from low level instrumentation points inside of the browser and analyzes them as your application runs.
Speed Tracer is available as a Chrome extension and works on all platforms where extensions are currently supported (Windows and Linux).</p>
<div class="figure align-center">
<img alt="../_images/speed-tracer.jpg" src="../_images/speed-tracer.jpg" />
</div>
<p>Cet outil est très pratique parce qu&#8217;il permet d&#8217;avoir un vrai temps de chargement nécessaire pour l&#8217;affichage de la page complet (y compris le parsage des éléments HTML, Javascript et CSS).</p>
</div>
</div>
<div class="section" id="utiliser-une-version-recente-de-php">
<h2>Utiliser une version récente de PHP<a class="headerlink" href="#utiliser-une-version-recente-de-php" title="Lien permanent vers ce titre">¶</a></h2>
<p>PHP est plus rapide chaque jour, en utilisant la dernière version, vous pourrez améliorer les performances de votre application
et aussi de PHP.</p>
</div>
<div class="section" id="utiliser-un-cache-php-bytecode">
<h2>Utiliser un cache PHP Bytecode<a class="headerlink" href="#utiliser-un-cache-php-bytecode" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="http://php.net/manual/en/book.apc.php">APC</a>, comme beaucoup d&#8217;autre cache bytecode, aide une application à réduire le temps de chargement des lectures, il segmente et parse les fichiers PHP pour chaque requêtes.
Une fois l&#8217;extension installé, utilisez la ligne suivante pour le mettre en place :</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">apc.enabled</span> <span class="o">=</span> <span class="s">On</span>
</pre></div>
</div>
<p>PHP 5.5 inclus un cache bytecode intégré appelé ZendOptimizer+, cette extension est aussi disponible pour PHP 5.3 et 5.4.</p>
</div>
<div class="section" id="mettez-le-travail-lent-en-tache-de-fond">
<h2>Mettez le travail lent en tâche de fond<a class="headerlink" href="#mettez-le-travail-lent-en-tache-de-fond" title="Lien permanent vers ce titre">¶</a></h2>
<p>Traiter une vidéo, envoyer des emails, compresser un fichier ou une image sont des tâches lentes qui doivent être mises en tâche de fond.
Voici une variété d&#8217;outils qui fournissent un système de mise en queue (effectuer les tâches les unes après les autres) ou un système de messages programme à programme qui fonctionne bien avec PHP :</p>
<ul class="simple">
<li><a class="reference external" href="http://kr.github.io/beanstalkd/">Beanstalkd</a></li>
<li><a class="reference external" href="http://redis.io/">Redis</a></li>
<li><a class="reference external" href="http://www.rabbitmq.com/">RabbitMQ</a></li>
<li><a class="reference external" href="https://github.com/chrisboulton/php-resque">Resque</a></li>
<li><a class="reference external" href="http://gearman.org/">Gearman</a></li>
<li><a class="reference external" href="http://www.zeromq.org/">ZeroMQ</a></li>
</ul>
</div>
<div class="section" id="google-page-speed">
<h2>Google Page Speed<a class="headerlink" href="#google-page-speed" title="Lien permanent vers ce titre">¶</a></h2>
<p><a class="reference external" href="https://developers.google.com/speed/pagespeed/mod">mod_pagespeed</a> accélère votre site et réduit le temps de chargement des pages. Ce module apache open-source (aussi disponible pour nginx sous le nom ngx_pagespeed)
met en place les meilleures pratique d&#8217;optimisation sur votre serveur, automatique. Il associe aussi les fichiers CSS, javascript et les images sans que vous n&#8217;ayez besoin de
modifier le contenu de votre site.</p>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Index général"
             >index</a></li>
        <li class="right" >
          <a href="../api/index.html" title="API Indice"
             >suivant</a> |</li>
        <li class="right" >
          <a href="linuxtools.html" title="Phalcon Developer Tools on Linux"
             >précédent</a> |</li> 
      </ul>
    </div>
        <div id="footer">

          <p>Found a typo or an error? Want to improve this document? The documentation sources are available on <a href="http://github.com/phalcon/docs">Github</a></p>
          <p>Need support or have questions? Check our <a href="http://phalconphp.com/support">Support Page</a></p>

          <p>The Phalcon PHP Framework is released under the <a href="https://github.com/phalcon/cphalcon/blob/master/docs/LICENSE.md">new BSD license</a>.</p>
          <p>Except where otherwise noted, content on this site is licensed under the
            <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a></p>
             Mis à jour le Oct 21, 2014.
            Créé avec <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.

          <p>
             &copy; Copyright 2014, Phalcon Team and contributors.
          </p>

            <div class="size-wrap footer-wrap">

                <div class="donate-wrap">
                    Donate to Phalcon: <a href="http://flattr.com/thing/1134206/Phalcon-PHP-Framework" target="_blank" class="button button-small orange">Flattr</a>
                    or
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="display: inline">
                        <input type="hidden" name="cmd" value="_s-xclick">
                        <input type="hidden" name="hosted_button_id" value="7LSYMNMFZNG8W">
                        <input class="button button-small orange" style="border: inherit; display: inline; font-weight: bold" type="submit" value="via Paypal" title="PayPal — The safer, easier way to pay online.">
                    </form>
                </div>

                <div class="social-links">
                    <a href="https://twitter.com/phalconphp" class="social-link tw">Twitter</a>
                    <a href="http://www.facebook.com/pages/Phalcon/134230726685897" class="social-link fb">Facebook</a>
                    <a href="https://plus.google.com/102376109340560896457" class="social-link gp">Google Plus</a>
                    <a href="http://vimeo.com/user10964377" class="social-link vm">Vimeo</a>
                </div>

            </div>

        </div>

    </div>
    <script type="text/javascript">
    $(window).on("load", function(){
      var cx = '009733439235723428699:lh9ltjgvdz8';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(gcse, s);
      /*window.setTimeout(function(){
        $('.gsc-search-button').css({
          'background': '#f06715',
          'padding': '2px',
          'border': '0'
        });
      }, 1000)*/
    });
    </script>

  </body>
</html>