<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Increasing Performance: What’s next? &mdash; Phalcon 3.1.1 documentation (English)</title>
    <meta name="keywords" content="php, phalcon, phalcon php, php framework, faster php framework">
    <link rel="stylesheet" type="text/css" href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" type="text/css" href="//static.phalconphp.com/www/css/phalcon.min.css" />
    <link href='//fonts.googleapis.com/css?family=Open+Sans:700,400' rel='stylesheet' type='text/css'>
    <link href="//fonts.googleapis.com/css?family=Merriweather:400,700" rel="stylesheet" type="text/css" />
    <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" />
    <!--
    EUROPE <link href='//fonts.googleapis.com/css?family=Open+Sans:700,400&subset=latin-ext' rel='stylesheet' type='text/css'>
    GREEK <link href='//fonts.googleapis.com/css?family=Open+Sans:700,400&subset=greek-ext' rel='stylesheet' type='text/css'>
    RUSSIA <link href='//fonts.googleapis.com/css?family=Open+Sans:700,400&subset=cyrillic-ext,latin' rel='stylesheet' type='text/css'>
    -->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '3.1.1',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/docs.js"></script>
    <link rel="shortcut icon" href="https://static.phalconphp.com/www/images/favicon.ico"/>
    <link rel="top" title="Phalcon 3.1.1 documentation" href="../index.html" />
    <link rel="next" title="Dependency Injection Explained" href="di-explained.html" />
    <link rel="prev" title="Unit testing" href="unit-testing.html" /> 
  </head>
  <body>

<header class="page-header">
    <nav class="navbar" role="navigation">
        <div class="container">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#main-menu-container">
                    <span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span>
                </button>
                <a class="navbar-brand phalcon-logo" href="/"><span itemprop="name" class="sr-only">Phalcon PHP</span></a>
            </div>

            <div class="collapse navbar-collapse navbar-right" id="main-menu-container">
                <ul class="nav navbar-nav main-menu">
                  <li class="first"><a href="//phalconphp.com/en/download" class="header-nav-link">Download</a></li>
                  <li><a href="//docs.phalconphp.com/en/latest/index.html" class="header-nav-link" target="_blank">Documentation</a></li>
                  <li><a href="//forum.phalconphp.com/" class="header-nav-link" target="_blank">Forum</a></li>
                  <li><a href="//blog.phalconphp.com/" class="header-nav-link" target="_blank">Blog</a></li>
                  <li><a href="//phalconist.com/" class="header-nav-link" target="_blank">Resources</a></li>
                  <li><a href="//phalconphp.com/en/about">About</a></li>
                  <li><div align="right">
                      <iframe src="https://ghbtns.com/github-btn.html?user=phalcon&amp;repo=cphalcon&amp;type=watch&amp;count=true&amp;size=large"
      allowtransparency="true" frameborder="0" scrolling="0" width="152px" height="30px"></iframe>
                    </div></li>
                </ul>
            </div>
        </div>
    </nav>
  </header>

<div class="heading">
    <div class="container">
        <div class="row">
            <h2>Documentation</h2>
        </div>
    </div>
</div>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="di-explained.html" title="Dependency Injection Explained"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="unit-testing.html" title="Unit testing"
             accesskey="P">previous</a> |</li>
        <li><a href="//phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 3.1.1 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="100%" align="center" cellpadding="0" cellspacing="0">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            <div>
            <div id="searchbox" style="">
                <!--<form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="25" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>-->
                <div style="width:200px;padding:10px">
                  <gcse:searchbox-only></gcse:searchbox-only>
                </div>
            </div>
            </div>
            <div style="padding:5px;padding-left:10px">
              <div id="carbonads-container">
                <div class="carbonad"><div id="azcarbon"></div>
                <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=phalconphpcom" id="_carbonads_js"></script>
                </div></div>
            </div>
            <h3><a href="../index.html">Table Of Contents</a></h3>
            <ul>
<li><a class="reference internal" href="#">Increasing Performance: What&#8217;s next?</a><ul>
<li><a class="reference internal" href="#profile-on-the-server">Profile on the Server</a><ul>
<li><a class="reference internal" href="#profiling-with-xdebug">Profiling with XDebug</a></li>
<li><a class="reference internal" href="#profiling-with-xhprof">Profiling with Xhprof</a></li>
<li><a class="reference internal" href="#profiling-sql-statements">Profiling SQL Statements</a></li>
</ul>
</li>
<li><a class="reference internal" href="#profile-on-the-client">Profile on the Client</a><ul>
<li><a class="reference internal" href="#profile-with-chrome-firefox">Profile with Chrome/Firefox</a></li>
</ul>
</li>
<li><a class="reference internal" href="#yahoo-yslow">Yahoo! YSlow</a><ul>
<li><a class="reference internal" href="#profile-with-speed-tracer">Profile with Speed Tracer</a></li>
</ul>
</li>
<li><a class="reference internal" href="#use-a-recent-php-version">Use a recent PHP version</a></li>
<li><a class="reference internal" href="#use-a-php-bytecode-cache">Use a PHP Bytecode Cache</a></li>
<li><a class="reference internal" href="#do-blocking-work-in-the-background">Do blocking work in the background</a></li>
<li><a class="reference internal" href="#google-page-speed">Google Page Speed</a></li>
</ul>
</li>
</ul>

            <h4>Previous topic</h4>
            <p class="topless"><a href="unit-testing.html" title="previous chapter">&lt; Unit testing</a></p>
            <h4>Next topic</h4>
            <p class="topless"><a href="di-explained.html" title="next chapter">Dependency Injection Explained &gt;</a></p>
            <h3>This Page</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/whats-next.txt" rel="nofollow">Show Source</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <div class="section" id="increasing-performance-what-s-next">
<h1>Increasing Performance: What&#8217;s next?<a class="headerlink" href="#increasing-performance-what-s-next" title="Permalink to this headline">¶</a></h1>
<p>Get faster applications requires refine many aspects: server, client, network, database, web server, static sources, etc.
In this chapter we highlight scenarios where you can improve performance and how detect what is really slow in your application.</p>
<div class="section" id="profile-on-the-server">
<h2>Profile on the Server<a class="headerlink" href="#profile-on-the-server" title="Permalink to this headline">¶</a></h2>
<p>Each application is different, the permanent profiling is important to understand where performance can be increased.
Profiling gives us a real picture on what is really slow and what does not. Profiles can vary between a request and another,
so it is important to make enough measurements to make conclusions.</p>
<div class="section" id="profiling-with-xdebug">
<h3>Profiling with XDebug<a class="headerlink" href="#profiling-with-xdebug" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="http://xdebug.org/docs">Xdebug</a> provides an easier way to profile PHP applications, just install the extension and enable profiling in the php.ini:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">xdebug.profiler_enable</span> <span class="o">=</span> <span class="s">On</span>
</pre></div>
</div>
<p>Using a tool like <a class="reference external" href="https://github.com/jokkedk/webgrind/">Webgrind</a> you can see which functions/methods are slower than others:</p>
<div class="figure align-center">
<img alt="../_images/webgrind.jpg" src="../_images/webgrind.jpg" />
</div>
</div>
<div class="section" id="profiling-with-xhprof">
<h3>Profiling with Xhprof<a class="headerlink" href="#profiling-with-xhprof" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://github.com/facebook/xhprof">Xhprof</a> is another interesting extension to profile PHP applications. Add the following line to the start of the bootstrap file:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nb">xhprof_enable</span><span class="p">(</span><span class="nx">XHPROF_FLAGS_CPU</span> <span class="o">+</span> <span class="nx">XHPROF_FLAGS_MEMORY</span><span class="p">);</span>
</pre></div>
</div>
<p>Then at the end of the file save the profiled data:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$xhprof_data</span> <span class="o">=</span> <span class="nb">xhprof_disable</span><span class="p">(</span><span class="s1">&#39;/tmp&#39;</span><span class="p">);</span>

<span class="nv">$XHPROF_ROOT</span> <span class="o">=</span> <span class="s2">&quot;/var/www/xhprof/&quot;</span><span class="p">;</span>
<span class="k">include_once</span> <span class="nv">$XHPROF_ROOT</span> <span class="o">.</span> <span class="s2">&quot;/xhprof_lib/utils/xhprof_lib.php&quot;</span><span class="p">;</span>
<span class="k">include_once</span> <span class="nv">$XHPROF_ROOT</span> <span class="o">.</span> <span class="s2">&quot;/xhprof_lib/utils/xhprof_runs.php&quot;</span><span class="p">;</span>

<span class="nv">$xhprof_runs</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">XHProfRuns_Default</span><span class="p">();</span>
<span class="nv">$run_id</span> <span class="o">=</span> <span class="nv">$xhprof_runs</span><span class="o">-&gt;</span><span class="na">save_run</span><span class="p">(</span><span class="nv">$xhprof_data</span><span class="p">,</span> <span class="s2">&quot;xhprof_testing&quot;</span><span class="p">);</span>

<span class="k">echo</span> <span class="s2">&quot;http://localhost/xhprof/xhprof_html/index.php?run=</span><span class="si">{</span><span class="nv">$run_id</span><span class="si">}</span><span class="s2">&amp;source=xhprof_testing</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">;</span>
</pre></div>
</div>
<p>Xhprof provides a built-in HTML viewer to analyze the profiled data:</p>
<div class="figure align-center">
<img alt="../_images/xhprof-2.jpg" src="../_images/xhprof-2.jpg" />
</div>
<div class="figure align-center">
<img alt="../_images/xhprof-1.jpg" src="../_images/xhprof-1.jpg" />
</div>
</div>
<div class="section" id="profiling-sql-statements">
<h3>Profiling SQL Statements<a class="headerlink" href="#profiling-sql-statements" title="Permalink to this headline">¶</a></h3>
<p>Most database systems provide tools to identify slow SQL statements. Detecting and fixing slow queries is very important in order to increase performance
in the server side. In the Mysql case, you can use the slow query log to know what SQL queries are taking more time than expected:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">log-slow-queries</span> <span class="o">=</span> <span class="s">/var/log/slow-queries.log</span>
<span class="na">long_query_time</span> <span class="o">=</span> <span class="s">1.5</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="profile-on-the-client">
<h2>Profile on the Client<a class="headerlink" href="#profile-on-the-client" title="Permalink to this headline">¶</a></h2>
<p>Sometimes we may need to improve the loading of static elements such as images, javascript and css to improve performance.
The following tools are useful to detect common bottlenecks in the client side:</p>
<div class="section" id="profile-with-chrome-firefox">
<h3>Profile with Chrome/Firefox<a class="headerlink" href="#profile-with-chrome-firefox" title="Permalink to this headline">¶</a></h3>
<p>Most modern browsers have tools to profile the page loading time. In Chrome you can use the web inspector to know how much time is taking the
loading of the different resources required by a single page:</p>
<div class="figure align-center">
<img alt="../_images/chrome-1.jpg" src="../_images/chrome-1.jpg" />
</div>
<p><a class="reference external" href="http://getfirebug.com/">Firebug</a> provides a similar functionality:</p>
<div class="figure align-center">
<img alt="../_images/firefox-1.jpg" src="../_images/firefox-1.jpg" />
</div>
</div>
</div>
<div class="section" id="yahoo-yslow">
<h2>Yahoo! YSlow<a class="headerlink" href="#yahoo-yslow" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://developer.yahoo.com/yslow/">YSlow</a> analyzes web pages and suggests ways to improve their performance based on a set of <a class="reference external" href="http://developer.yahoo.com/performance/rules.html">rules for high performance web pages</a></p>
<div class="figure align-center">
<img alt="../_images/yslow-1.jpg" src="../_images/yslow-1.jpg" />
</div>
<div class="section" id="profile-with-speed-tracer">
<h3>Profile with Speed Tracer<a class="headerlink" href="#profile-with-speed-tracer" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://developers.google.com/web-toolkit/speedtracer/">Speed Tracer</a> is a tool to help you identify and fix performance problems in your web applications. It visualizes metrics that are taken
from low level instrumentation points inside of the browser and analyzes them as your application runs. Speed Tracer is available as a
Chrome extension and works on all platforms where extensions are currently supported (Windows and Linux).</p>
<div class="figure align-center">
<img alt="../_images/speed-tracer.jpg" src="../_images/speed-tracer.jpg" />
</div>
<p>This tool is very useful because it help you to get the real time used to render the whole page including HTML parsing,
Javascript evaluation and CSS styling.</p>
</div>
</div>
<div class="section" id="use-a-recent-php-version">
<h2>Use a recent PHP version<a class="headerlink" href="#use-a-recent-php-version" title="Permalink to this headline">¶</a></h2>
<p>PHP is faster every day, using the latest version improves the performance of your applications and also of Phalcon.</p>
</div>
<div class="section" id="use-a-php-bytecode-cache">
<h2>Use a PHP Bytecode Cache<a class="headerlink" href="#use-a-php-bytecode-cache" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="http://php.net/manual/en/book.apc.php">APC</a> as many other bytecode caches help an application to reduce the overhead of read, tokenize and parse PHP files in each request.
Once the extension is installed use the following setting to enable APC:</p>
<div class="highlight-ini"><div class="highlight"><pre><span class="na">apc.enabled</span> <span class="o">=</span> <span class="s">On</span>
</pre></div>
</div>
<p>PHP 5.5 includes a built-in bytecode cache called ZendOptimizer+, this extension is also available for 5.3 and 5.4.</p>
</div>
<div class="section" id="do-blocking-work-in-the-background">
<h2>Do blocking work in the background<a class="headerlink" href="#do-blocking-work-in-the-background" title="Permalink to this headline">¶</a></h2>
<p>Process a video, send e-mails, compress a file or an image, etc., are slow tasks that must be processed in background jobs.
There are a variety of tools that provide queuing or messaging systems that work well with PHP:</p>
<ul class="simple">
<li><a class="reference external" href="http://kr.github.io/beanstalkd/">Beanstalkd</a></li>
<li><a class="reference external" href="http://redis.io/">Redis</a></li>
<li><a class="reference external" href="http://www.rabbitmq.com/">RabbitMQ</a></li>
<li><a class="reference external" href="https://github.com/chrisboulton/php-resque">Resque</a></li>
<li><a class="reference external" href="http://gearman.org/">Gearman</a></li>
<li><a class="reference external" href="http://www.zeromq.org/">ZeroMQ</a></li>
</ul>
</div>
<div class="section" id="google-page-speed">
<h2>Google Page Speed<a class="headerlink" href="#google-page-speed" title="Permalink to this headline">¶</a></h2>
<p><a class="reference external" href="https://developers.google.com/speed/pagespeed/mod">mod_pagespeed</a> speeds up your site and reduces page load time. This open-source Apache HTTP server module (also available
for nginx as <a class="reference external" href="https://developers.google.com/speed/pagespeed/ngx">ngx_pagespeed</a>) automatically applies web performance best practices to pages, and associated assets
(CSS, JavaScript, images) without requiring that you modify your existing content or workflow.</p>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="di-explained.html" title="Dependency Injection Explained"
             >next</a> |</li>
        <li class="right" >
          <a href="unit-testing.html" title="Unit testing"
             >previous</a> |</li> 
      </ul>
    </div>

      <div class="prefooter">
  <div class="container">
      <div class="row">
          <div class="col-sm-3 text-right">
              <span>Follow along:</span>
          </div>
          <div class="col-sm-6 text-center">
              <a href="https://twitter.com/phalconphp" alt="Twitter" class="btn-social btn-social-twitter"><i class="fa fa-fw fa-twitter" aria-hidden="true"></i></a>
              <a href="https://www.facebook.com/pages/Phalcon-Framework/134230726685897" alt="Facebook" class="btn-social btn-social-facebook"><i class="fa fa-fw fa-facebook" aria-hidden="true"></i></a>
              <a href="https://plus.google.com/102376109340560896457" alt="Google+" class="btn-social btn-social-googleplus"><i class="fa fa-fw fa-google-plus" aria-hidden="true"></i></a>
              <a href="https://github.com/phalcon/cphalcon" alt="Github" class="btn-social btn-social-github"><i class="fa fa-fw fa-github" aria-hidden="true"></i></a>
          </div>
          <div class="col-sm-3">
          </div>
      </div>
  </div>
</div>

<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-xs-4 col-sm-3">
                <h4>Download</h4>
                <ul>
                    <li><a href="https://phalconphp.com/download">Installing Phalcon PHP</a></li>
                    <li><a href="https://docs.phalconphp.com/en/latest/index.html" class="header-nav-link" target="_blank">Documentation</a></li>
                    <li><a href="https://api.phalconphp.com">API</a></li>
                    <li><a href="https://docs.phalconphp.com/en/latest/reference/tutorial.html">Tutorial</a></li>
                    <li><a href="https://docs.phalconphp.com/en/latest/reference/tutorial.html#sample-applications">Sample Applications</a></li>
                </ul>
            </div>
            <div class="col-xs-4 col-sm-3">
                <h4>Community</h4>
                <ul>
                    <li><a href="https://forum.phalconphp.com/" class="header-nav-link" target="_blank">Forum</a></li>
                    <li><a href="https://github.com/phalcon/cphalcon">GitHub</a></li>
                    <li><a href="https://github.com/phalcon/cphalcon/issues">Issue Tracker</a></li>
                    <li><a href="https://stackoverflow.com/questions/tagged/phalcon">Stack Overflow</a></li>
                    <li><a href="https://phalconphp.com/en/testimonials">Testimonials</a></li>
                    <li><a href="https://builtwith.phalconphp.com/">Built with Phalcon</a></li>
                    <li><a href="https://store.phalconphp.com/">Store</a></li>
                </ul>
            </div>
            <div class="col-xs-4 col-sm-2">
                <h4>About</h4>
                <ul>
                    <li><a class="link-black" href="http://blog.phalconphp.com/">Blog</a></li>
                    <li><a href="https://phalconphp.com/en/about">About</a></li>
                    <li><a href="https://phalconphp.com/en/team">Team</a></li>
                    <li><a href="https://phalconphp.com/en/roadmap">Roadmap</a></li>
                    <li><a href="https://phalconphp.com/en/donate">Donate</a></li>
                    <li><a href="https://phalconphp.com/en/consulting">Consulting</a></li>
                    <li><a href="https://phalconphp.com/en/hosting">Hosting</a></li>
                </ul>
            </div>
            <div id="license-spaccer" class="visible-xs"></div>
            <div id="license-wrapper" class="col-xs-12 col-sm-4">
                <p class="license">
                    Phalcon is an open-source PHP framework <br />
                    built as a C-extension. It is available under the <br />
                    <a href="http://opensource.org/licenses/BSD-3-Clause" target="_blank">new BSD License</a>.
                </p>

                <div class="design">
                    <span>Website Designed by:</span>
                </div>
                <a class="license" href="http://loudertech.com/" target="_blank" title="">
                    <span>LouderTech SAS</span>
                </a>
            </div>
        </div>
    </div>
</footer>

    </div>
    <script type="text/javascript">
    $(window).on("load", function(){
      var cx = '009733439235723428699:lh9ltjgvdz8';
      var gcse = document.createElement('script');
      gcse.type = 'text/javascript';
      gcse.async = true;
      gcse.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//www.google.com/cse/cse.js?cx=' + cx;
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(gcse, s);
    });
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script src="https://static.phalconphp.com/www/js/plugins/jquery.lazyload.min.js"></script>
    <script src="https://static.phalconphp.com/www/js/plugins/jquery.magnific-popup.min.js"></script>
    <script src="https://static.phalconphp.com/www/js/plugins/highlight.pack.js"></script>
    <script src="https://static.phalconphp.com/www/js/plugins/jquery.ajaxchimp.min.js"></script>
    <script src="https://static.phalconphp.com/www/js/plugins/jquery.backstretch.min.js"></script>
    <script src="https://static.phalconphp.com/www/js/custom.js"></script>

  </body>
</html>