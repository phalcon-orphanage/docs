
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Миграции базы данных &mdash; Phalcon 1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/docs.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 1.3.0 documentation" href="../index.html" />
    <link rel="next" title="Отладка приложений" href="debug.html" />
    <link rel="prev" title="Интернационализация" href="intl.html" /> 
  </head>
  <body>
    <div id="wrapper">

        <div class="size-wrap">

            <div class="header clear-fix">
                <a class="header-logo" href="http://phalconphp.com"><span class="logo-text">Phalcon</span></a>
                <div class="header-right">
                    <iframe src="http://ghbtns.com/github-btn.html?user=phalcon&amp;repo=cphalcon&amp;type=watch&amp;count=true&amp;size=large"
allowtransparency="true" frameborder="0" scrolling="0" width="152px" height="30px"></iframe>
                </div>
                <ul class="header-nav">
                    <li><a href="http://phalconphp.com/" class="header-nav-link">Home</a></li>
                    <li><a href="http://phalconphp.com/download" class="header-nav-link">Download</a></li>
                    <li><a href="http://forum.phalconphp.com/" class="header-nav-link active">Forum</a></li>
                    <li><a href="http://blog.phalconphp.com/" class="header-nav-link">Blog</a></li>
                    <li><a href="http://phalconphp.com/support" class="header-nav-link">Support</a></li>
                    <li><a href="http://store.phalconphp.com/" class="header-nav-link">Store</a></li>
                    <li><a href="https://github.com/phalcon/cphalcon" class="header-nav-link">GitHub</a></li>
                </ul>
            </div>

        </div>
    <div class="header-line">
      <div class="size-wrap">
        <div class="header-line-title title-white">Documentation</div>
      </div>
    </div>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Словарь-указатель"
             accesskey="I">словарь</a></li>
        <li class="right" >
          <a href="debug.html" title="Отладка приложений"
             accesskey="N">следующий</a> |</li>
        <li class="right" >
          <a href="intl.html" title="Интернационализация"
             accesskey="P">предыдущий</a> |</li>
        <li><a href="http://phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 1.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            <div id="searchbox" style="">
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="15" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>
          <div style="padding:5px;padding-left:10px">
              <div id="carbonads-container">
                  <div class="carbonad"><div id="azcarbon"></div>
                      <script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/56496/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script>
                  </div>
              </div>
          </div>
            <h3><a href="../index.html">Содержание</a></h3>
            <ul>
<li><a class="reference internal" href="#">Миграции базы данных</a><ul>
<li><a class="reference internal" href="#id2">Дампинг схемы</a></li>
<li><a class="reference internal" href="#migration">Структура класса Migration</a><ul>
<li><a class="reference internal" href="#id3">Определение столбцов</a></li>
<li><a class="reference internal" href="#id4">Определение индексов</a></li>
<li><a class="reference internal" href="#id5">Определение внешних ключей</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id6">Запись миграций</a></li>
<li><a class="reference internal" href="#id7">Запуск миграций</a></li>
</ul>
</li>
</ul>

            <h4>Предыдущий раздел</h4>
            <p class="topless"><a href="intl.html" title="предыдущая глава">&lt; Интернационализация</a></p>
            <h4>Следующий раздел</h4>
            <p class="topless"><a href="debug.html" title="следующая глава">Отладка приложений &gt;</a></p>
            <h3>На этой странице</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/migrations.txt" rel="nofollow">Показать исходный текст</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <div class="section" id="id1">
<h1>Миграции базы данных<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h1>
<p>Миграции это удобный для вас способ, структурировано и организовано изменять ваши базы данных.</p>
<blockquote class="highlights">
<div><strong>Важно:</strong> Миграции доступны через <a class="reference internal" href="tools.html"><em>Phalcon Developer Tools</em></a>.
Вам потребуется Phalcon версии не ниже 0.5.0для использования инструментов разработчика.
Также рекомендуется использовать PHP версии 5.3.11 или более поздней версии.</div></blockquote>
<p>Часто при разработке необходимо вносить изменения на production окружении. Некоторые из этих изменений могут касаться
изменений в базе данных: новые столбцы, новые таблицы, удаление индексов и т.д.</p>
<p>При миграции создается набор классов, чтобы описать, как ваша база данных структурирована в данный момент. Эти классы
могут использоваться для синхронизации структуры схемы в удаленных базах данных и подготовки вашей базы данных к работе
с новыми изменениями, которые реализует ваше приложение. Миграции описывают эти изменения с использованием простого PHP.</p>
<div align="center">
    <iframe src="http://player.vimeo.com/video/41381817" width="500" height="281" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>
</div><div class="section" id="id2">
<h2>Дампинг схемы<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p><a class="reference internal" href="tools.html"><em>Phalcon Developer Tools</em></a> предоставляет скрипт для управления миграциями (генерация, запуск и откат).</p>
<p>Доступные опции для генерации миграций:</p>
<div class="figure align-center">
<img alt="../_images/migrations-1.png" src="../_images/migrations-1.png" />
</div>
<p>Запуск скрипта без параметров делает простой дамп каждого объекта (таблиц и представлений) из базы данных в классы
миграции.</p>
<p>Каждая миграция имеет идентификатор версии связанный с ним. Номер версии позволяет нам определить, является ли миграция
старше или новее текущей версии нашей базы данных. Версии также сообщают Phalcon о рабочем состоянии при выполнении
миграции.</p>
<div class="figure align-center">
<img alt="../_images/migrations-2.png" src="../_images/migrations-2.png" />
</div>
<p>При генерации миграций, инструкции отображаются в консоли для описания различных этапов миграции и времени выполнения
этих операторов. В конце концов, версия миграция будет создана.</p>
<p>По умолчанию <a class="reference internal" href="tools.html"><em>Phalcon Developer Tools</em></a> использует директорию <em>app/migrations</em> для дампа файлов миграции.
Вы можете изменить расположение, установив один из параметров по генерации скрипта. Каждая таблица в базе данных имеет
свой соответствующий класс, созданный в отдельном файле директории, ссылающейся на ее версию.</p>
<div class="figure align-center">
<img alt="../_images/migrations-3.png" src="../_images/migrations-3.png" />
</div>
</div>
<div class="section" id="migration">
<h2>Структура класса Migration<a class="headerlink" href="#migration" title="Ссылка на этот заголовок">¶</a></h2>
<p>Каждый файл содержит уникальный класс, который расширяет PhalconMvcModelMigration. Эти классы обычно имеют два
метода: up() и down(). Up() выполняет миграцию, а down() откатывает ее.</p>
<p>Метод Up() также содержит магический метод morphTable(). Магия начинается тогда, когда он распознает изменения,
требующие синхронизации фактической таблицы в базе данных, приведенные выше.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Phalcon\Db\Column</span> <span class="k">as</span> <span class="nx">Column</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Phalcon\Db\Index</span> <span class="k">as</span> <span class="nx">Index</span><span class="p">;</span>
<span class="k">use</span> <span class="nx">Phalcon\Db\Reference</span> <span class="k">as</span> <span class="nx">Reference</span><span class="p">;</span>

<span class="k">class</span> <span class="nc">ProductsMigration_100</span> <span class="k">extends</span> <span class="nx">\Phalcon\Mvc\Model\Migration</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">morphTable</span><span class="p">(</span>
            <span class="s2">&quot;products&quot;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span>
                <span class="s2">&quot;columns&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Column</span><span class="p">(</span>
                        <span class="s2">&quot;id&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span>
                            <span class="s2">&quot;type&quot;</span>          <span class="o">=&gt;</span> <span class="nx">Column</span><span class="o">::</span><span class="na">TYPE_INTEGER</span><span class="p">,</span>
                            <span class="s2">&quot;size&quot;</span>          <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
                            <span class="s2">&quot;unsigned&quot;</span>      <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;notNull&quot;</span>       <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;autoIncrement&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;first&quot;</span>         <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                    <span class="k">new</span> <span class="nx">Column</span><span class="p">(</span>
                        <span class="s2">&quot;product_types_id&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span>
                            <span class="s2">&quot;type&quot;</span>     <span class="o">=&gt;</span> <span class="nx">Column</span><span class="o">::</span><span class="na">TYPE_INTEGER</span><span class="p">,</span>
                            <span class="s2">&quot;size&quot;</span>     <span class="o">=&gt;</span> <span class="mi">10</span><span class="p">,</span>
                            <span class="s2">&quot;unsigned&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;notNull&quot;</span>  <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;after&quot;</span>    <span class="o">=&gt;</span> <span class="s2">&quot;id&quot;</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                    <span class="k">new</span> <span class="nx">Column</span><span class="p">(</span>
                        <span class="s2">&quot;name&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span>
                            <span class="s2">&quot;type&quot;</span>    <span class="o">=&gt;</span> <span class="nx">Column</span><span class="o">::</span><span class="na">TYPE_VARCHAR</span><span class="p">,</span>
                            <span class="s2">&quot;size&quot;</span>    <span class="o">=&gt;</span> <span class="mi">70</span><span class="p">,</span>
                            <span class="s2">&quot;notNull&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;after&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;product_types_id&quot;</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                    <span class="k">new</span> <span class="nx">Column</span><span class="p">(</span>
                        <span class="s2">&quot;price&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span>
                            <span class="s2">&quot;type&quot;</span>    <span class="o">=&gt;</span> <span class="nx">Column</span><span class="o">::</span><span class="na">TYPE_DECIMAL</span><span class="p">,</span>
                            <span class="s2">&quot;size&quot;</span>    <span class="o">=&gt;</span> <span class="mi">16</span><span class="p">,</span>
                            <span class="s2">&quot;scale&quot;</span>   <span class="o">=&gt;</span> <span class="mi">2</span><span class="p">,</span>
                            <span class="s2">&quot;notNull&quot;</span> <span class="o">=&gt;</span> <span class="k">true</span><span class="p">,</span>
                            <span class="s2">&quot;after&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;name&quot;</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="p">),</span>
                <span class="p">),</span>
                <span class="s2">&quot;indexes&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Index</span><span class="p">(</span>
                        <span class="s2">&quot;PRIMARY&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">)</span>
                    <span class="p">),</span>
                    <span class="k">new</span> <span class="nx">Index</span><span class="p">(</span>
                        <span class="s2">&quot;product_types_id&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span><span class="s2">&quot;product_types_id&quot;</span><span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">),</span>
                <span class="s2">&quot;references&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="k">new</span> <span class="nx">Reference</span><span class="p">(</span>
                        <span class="s2">&quot;products_ibfk_1&quot;</span><span class="p">,</span>
                        <span class="k">array</span><span class="p">(</span>
                            <span class="s2">&quot;referencedSchema&quot;</span>  <span class="o">=&gt;</span> <span class="s2">&quot;invo&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;referencedTable&quot;</span>   <span class="o">=&gt;</span> <span class="s2">&quot;product_types&quot;</span><span class="p">,</span>
                            <span class="s2">&quot;columns&quot;</span>           <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;product_types_id&quot;</span><span class="p">),</span>
                            <span class="s2">&quot;referencedColumns&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s2">&quot;id&quot;</span><span class="p">),</span>
                        <span class="p">)</span>
                    <span class="p">)</span>
                <span class="p">),</span>
                <span class="s2">&quot;options&quot;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span>
                    <span class="s2">&quot;TABLE_TYPE&quot;</span>      <span class="o">=&gt;</span> <span class="s2">&quot;BASE TABLE&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;ENGINE&quot;</span>          <span class="o">=&gt;</span> <span class="s2">&quot;InnoDB&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;TABLE_COLLATION&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;utf8_general_ci&quot;</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
<p>Класс называется &#8220;ProductsMigration_100&#8221;. Suffix 100 указывает на версию 1.0.0. morphTable() принимает ассоциативный
массив с 4 возможными типами данных:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="85%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Индекс</th>
<th class="head">Описание</th>
<th class="head">Optional</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8220;columns&#8221;</td>
<td>Массив с набором столбцов таблицы.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>&#8220;indexes&#8221;</td>
<td>Массив с набором индексов таблицы.</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>&#8220;references&#8221;</td>
<td>Массив с набором ссылок на таблицы (внешние ключи).</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>&#8220;options&#8221;</td>
<td>Массив с набором опций для создания таблицы. Эти опции зачастую связаны с системой базы данных, в которой миграция был сгенерирована.</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<div class="section" id="id3">
<h3>Определение столбцов<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference internal" href="../api/Phalcon_Db_Column.html"><em>Phalcon\Db\Column</em></a> используется для определения столбцов таблицы. it encapsulates column related features. Его конструктор принимает в качестве первого параметра имя столбца и массив, описывающий колонки. Доступны следующие опции при описании столбцов:</p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="84%" />
<col width="6%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Опция</th>
<th class="head">Описание</th>
<th class="head">Optional</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8220;type&#8221;</td>
<td>Тип столбца. <a class="reference internal" href="../api/Phalcon_Db_Column.html"><em>Phalcon_Db_Column</em></a> должен быть константой (смотрите ниже)</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>&#8220;size&#8221;</td>
<td>Некоторые типы столбцов, как VARCHAR или INTEGER  могут иметь определенный размер</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>&#8220;scale&#8221;</td>
<td>Столбцы DECIMAL или NUMBER могут иметь разрешение точности, чтобы указать до какого десятичного знака необходимо хранить значение.</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>&#8220;unsigned&#8221;</td>
<td>INTEGER столбцы могут быть знаковыми или беззнаковыми. Эта опция не распространяется на другие типы столбцов</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>&#8220;notNull&#8221;</td>
<td>Столбец может хранить нулевые значения?</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>&#8220;autoIncrement&#8221;</td>
<td>С помощью этого атрибута столбец заполняется автоматически с автоинкрементным целым. Только один столбец в таблице может иметь этот атрибут</td>
<td>Yes</td>
</tr>
<tr class="row-even"><td>&#8220;first&#8221;</td>
<td>Столбец должны быть расположены на первые позиции в порядке столбцов</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>&#8220;after&#8221;</td>
<td>Колонка должна быть помещена после указанного столбца</td>
<td>Yes</td>
</tr>
</tbody>
</table>
<p>Миграции базы данных поддерживают следующие типы столбцов базы данных:</p>
<ul class="simple">
<li>Phalcon\Db\Column::TYPE_INTEGER</li>
<li>Phalcon\Db\Column::TYPE_DATE</li>
<li>Phalcon\Db\Column::TYPE_VARCHAR</li>
<li>Phalcon\Db\Column::TYPE_DECIMAL</li>
<li>Phalcon\Db\Column::TYPE_DATETIME</li>
<li>Phalcon\Db\Column::TYPE_CHAR</li>
<li>Phalcon\Db\Column::TYPE_TEXT</li>
</ul>
</div>
<div class="section" id="id4">
<h3>Определение индексов<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference internal" href="../api/Phalcon_Db_Index.html"><em>Phalcon\Db\Index</em></a> определяет индексы таблицы. Для создания индекса требуется
определить его имя и список столбцов. Заметим, что если любой индекс имеет название PRIMARY, то Phalcon создаст
индекс первичного ключа в этой таблице.</p>
</div>
<div class="section" id="id5">
<h3>Определение внешних ключей<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h3>
<p><a class="reference internal" href="../api/Phalcon_Db_Reference.html"><em>Phalcon\Db\Reference</em></a> определяет ссылки на таблицы (также называемые внешними
ключами). Следующие опции могут быть использованы для определения внешних ключей:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="78%" />
<col width="7%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Индекс</th>
<th class="head">Описание</th>
<th class="head">Optional</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8220;referencedTable&#8221;</td>
<td>It&#8217;s auto-descriptive. Содержит имя ссылочной таблицы.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>&#8220;columns&#8221;</td>
<td>Массив с названием столбцов в таблице, которые имеют ссылки.</td>
<td>No</td>
</tr>
<tr class="row-even"><td>&#8220;referencedColumns&#8221;</td>
<td>Массив с именем столбцов в указанной таблице.</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>&#8220;referencedTable&#8221;</td>
<td>Ссылочной таблицы, может быть, находится в другой схеме или базе данных. Эта опция позволяет вам определить это.</td>
<td>Yes</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="id6">
<h2>Запись миграций<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h2>
<p>Миграции не только предназначены для &#8220;морфинга&#8221; таблицы. Миграция является обычным классом PHP, так что вы не ограничены
этими функциями. Например, после добавления столбца можно написать код для установки значений этого столбца для
существующих записей. Для более подробной информации и примеров отдельных методов,
проверьте <a class="reference internal" href="db.html"><em>database component</em></a>.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">ProductsMigration_100</span> <span class="k">extends</span> <span class="nx">\Phalcon\Mvc\Model\Migration</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">up</span><span class="p">()</span>
    <span class="p">{</span>
        <span class="c1">//...</span>
        <span class="nx">self</span><span class="o">::</span><span class="nv">$_connection</span><span class="o">-&gt;</span><span class="na">insert</span><span class="p">(</span>
            <span class="s2">&quot;products&quot;</span><span class="p">,</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;Malabar spinach&quot;</span><span class="p">,</span> <span class="mf">14.50</span><span class="p">),</span>
            <span class="k">array</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">,</span> <span class="s2">&quot;price&quot;</span><span class="p">)</span>
        <span class="p">);</span>
    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>Запуск миграций<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h2>
<p>Как только сгенерированные миграции, загруженных на целевой сервер, вы можете легко запустить их, как показано в
следующем примере:</p>
<div class="figure align-center">
<img alt="../_images/migrations-4.png" src="../_images/migrations-4.png" />
</div>
<div class="figure align-center">
<img alt="../_images/migrations-5.png" src="../_images/migrations-5.png" />
</div>
<p>В зависимости от того, насколько сильно устаревшей является база данных по миграции, Phalcon может запускать несколько
версий миграции в одном процессе миграции. Если указать целевую версию, Phalcon будет запускать нужные миграций пока не
достигнет указанной версии.</p>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Словарь-указатель"
             >словарь</a></li>
        <li class="right" >
          <a href="debug.html" title="Отладка приложений"
             >следующий</a> |</li>
        <li class="right" >
          <a href="intl.html" title="Интернационализация"
             >предыдущий</a> |</li> 
      </ul>
    </div>
        <div id="footer">

          <p>Нашли ошибку или опечатку? Желаете улучшить этот документ? Исходники русской документации доступны на <a href="http://github.com/phalcon/docs">Github</a></p>
          <p>Нужна помощь или возникли вопросы? Посетите <a href="http://phalconphp.com/ru/support">страницу помощи<</a></p>

          <p>Фреймворк Phalcon PHP распространяется с учетом <a href="https://github.com/phalcon/cphalcon/blob/master/docs/LICENSE.md">new BSD license</a>.</p>
          <p>Кроме случаев, когда указано иное, содержимое на этом сайте, защищено в соответствии с
            <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a></p>
             Последнее обновление Oct 21, 2014.
            Создано с использованием <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.

          <p>
             &copy; Copyright 2014, Phalcon Team.
          </p>

            <div class="size-wrap footer-wrap">

                <div class="donate-wrap">
                    Поддержать Phalcon: <a href="http://flattr.com/thing/1134206/Phalcon-PHP-Framework" target="_blank" class="button button-small orange">Flattr</a>
                    или
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="display: inline">
                        <input type="hidden" name="cmd" value="_s-xclick">
                        <input type="hidden" name="hosted_button_id" value="7LSYMNMFZNG8W">
                        <input class="button button-small orange" style="border: inherit; display: inline; font-weight: bold" type="submit" value="via Paypal" title="PayPal — The safer, easier way to pay online.">
                    </form>
                </div>

                <div class="social-links">
                    <a href="https://twitter.com/phalconphp" class="social-link tw">Twitter</a>
                    <a href="http://www.facebook.com/pages/Phalcon/134230726685897" class="social-link fb">Facebook</a>
                    <a href="https://plus.google.com/102376109340560896457" class="social-link gp">Google Plus</a>
                    <a href="http://vimeo.com/user10964377" class="social-link vm">Vimeo</a>
                </div>

            </div>

        </div>

    </div>
  </body>
</html>