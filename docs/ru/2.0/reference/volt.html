
<!DOCTYPE html>

<html lang="en">
  <head>
    
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Шаблонизатор Volt &mdash; Phalcon 1.3.0 documentation</title>
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link href='http://fonts.googleapis.com/css?family=Ubuntu:400,500,700,300italic,400italic,500italic&amp;subset=latin,cyrillic-ext' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/docs.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.3.0',
        COLLAPSE_MODINDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
    <script type="text/javascript" src="../_static/docs.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="top" title="Phalcon 1.3.0 documentation" href="../index.html" />
    <link rel="next" title="MVC Приложения" href="applications.html" />
    <link rel="prev" title="Управление ресурсами (Assets Management)" href="assets.html" /> 
  </head>
  <body>
    <div id="wrapper">

        <div class="size-wrap">

            <div class="header clear-fix">
                <a class="header-logo" href="http://phalconphp.com"><span class="logo-text">Phalcon</span></a>
                <div class="header-right">
                    <iframe src="http://ghbtns.com/github-btn.html?user=phalcon&amp;repo=cphalcon&amp;type=watch&amp;count=true&amp;size=large"
allowtransparency="true" frameborder="0" scrolling="0" width="152px" height="30px"></iframe>
                </div>
                <ul class="header-nav">
                    <li><a href="http://phalconphp.com/" class="header-nav-link">Home</a></li>
                    <li><a href="http://phalconphp.com/download" class="header-nav-link">Download</a></li>
                    <li><a href="http://forum.phalconphp.com/" class="header-nav-link active">Forum</a></li>
                    <li><a href="http://blog.phalconphp.com/" class="header-nav-link">Blog</a></li>
                    <li><a href="http://phalconphp.com/support" class="header-nav-link">Support</a></li>
                    <li><a href="http://store.phalconphp.com/" class="header-nav-link">Store</a></li>
                    <li><a href="https://github.com/phalcon/cphalcon" class="header-nav-link">GitHub</a></li>
                </ul>
            </div>

        </div>
    <div class="header-line">
      <div class="size-wrap">
        <div class="header-line-title title-white">Documentation</div>
      </div>
    </div>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Словарь-указатель"
             accesskey="I">словарь</a></li>
        <li class="right" >
          <a href="applications.html" title="MVC Приложения"
             accesskey="N">следующий</a> |</li>
        <li class="right" >
          <a href="assets.html" title="Управление ресурсами (Assets Management)"
             accesskey="P">предыдущий</a> |</li>
        <li><a href="http://phalconphp.com">Home</a> &raquo;</li>
        <li><a href="../index.html">Phalcon 1.3.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

      <table width="90%" align="center">
        <tr>
      <td class="primary-box" width="25%" valign="top">
            <div id="searchbox" style="">
                <form class="search" action="http://readthedocs.org/search/project/" method="get">
                  <input type="search" name="q" size="15" placeholder="Search">
                  <input type="submit" value="Go">
                  <input type="hidden" name="selected_facets" value="project:">
                </form>
            </div>
          <div style="padding:5px;padding-left:10px">
              <div id="carbonads-container">
                  <div class="carbonad"><div id="azcarbon"></div>
                      <script type="text/javascript">var z = document.createElement("script"); z.type = "text/javascript"; z.async = true; z.src = "http://engine.carbonads.com/z/56496/azcarbon_2_1_0_VERT"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(z, s);</script>
                  </div>
              </div>
          </div>
            <h3><a href="../index.html">Содержание</a></h3>
            <ul>
<li><a class="reference internal" href="#">Шаблонизатор Volt</a><ul>
<li><a class="reference internal" href="#id1">Введение</a></li>
<li><a class="reference internal" href="#id2">Подключение Volt</a></li>
<li><a class="reference internal" href="#id3">Основы</a></li>
<li><a class="reference internal" href="#id4">Переменные</a></li>
<li><a class="reference internal" href="#id5">Фильтры</a></li>
<li><a class="reference internal" href="#id6">Комментарии</a></li>
<li><a class="reference internal" href="#id7">Список управляющих конструкций</a><ul>
<li><a class="reference internal" href="#for">For</a></li>
<li><a class="reference internal" href="#id8">Управление циклами</a></li>
<li><a class="reference internal" href="#if">If</a></li>
<li><a class="reference internal" href="#id9">Контекст цикла</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id10">Присваивания</a></li>
<li><a class="reference internal" href="#id11">Выражения</a><ul>
<li><a class="reference internal" href="#id12">Литералы</a></li>
<li><a class="reference internal" href="#id13">Массивы</a></li>
<li><a class="reference internal" href="#id14">Математические операторы</a></li>
<li><a class="reference internal" href="#id15">Операторы сравнения</a></li>
<li><a class="reference internal" href="#id16">Логические операторы</a></li>
<li><a class="reference internal" href="#id17">Другие операторы</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id18">Проверки</a></li>
<li><a class="reference internal" href="#macros">Macros</a></li>
<li><a class="reference internal" href="#tag-helpers">Использование Tag Helpers</a></li>
<li><a class="reference internal" href="#id19">Функции</a></li>
<li><a class="reference internal" href="#id20">Связывание с представлениями</a><ul>
<li><a class="reference internal" href="#include">Include</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id21">Наследование шаблонов</a><ul>
<li><a class="reference internal" href="#id22">Множественное наследование</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id23">Режим автоматического экранирования</a></li>
<li><a class="reference internal" href="#id24">Настройка шаблонизатора Volt</a></li>
<li><a class="reference internal" href="#id25">Расширение Volt</a><ul>
<li><a class="reference internal" href="#id26">Функции</a></li>
<li><a class="reference internal" href="#id27">Фильтры</a></li>
<li><a class="reference internal" href="#extensions">Extensions</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id28">Кэширование частей представления</a></li>
<li><a class="reference internal" href="#id29">Использование сервисов в шаблоне</a></li>
<li><a class="reference internal" href="#id30">Отдельный компонент</a></li>
<li><a class="reference internal" href="#id31">Внешние ресурсы</a></li>
</ul>
</li>
</ul>

            <h4>Предыдущий раздел</h4>
            <p class="topless"><a href="assets.html" title="предыдущая глава">&lt; Управление ресурсами (Assets Management)</a></p>
            <h4>Следующий раздел</h4>
            <p class="topless"><a href="applications.html" title="следующая глава">MVC Приложения &gt;</a></p>
            <h3>На этой странице</h3>
            <ul class="this-page-menu">
              <li><a href="../_sources/reference/volt.txt" rel="nofollow">Показать исходный текст</a></li>
            </ul>
        </td>
          <td class="second-box" valign="top">
            <div class="document">
                <div class="documentwrapper">
                  <div class="bodywrapper">
                    <div class="body" >
                      
  <div class="section" id="volt">
<h1>Шаблонизатор Volt<a class="headerlink" href="#volt" title="Ссылка на этот заголовок">¶</a></h1>
<p>Volt — ультрабыстрый и дружелюбный по отношению к дизайнеру язык шаблонизирования, написанный на C для PHP. Он предоставляет набор подручных средств, который позволит вам легко создавать представления. Volt очень сильно связан с остальными компонентами Phalcon, однако, вы можете использовать его в качестве самостоятельного компонента вашего приложения.</p>
<div class="figure align-center">
<img alt="../_images/volt.jpg" src="../_images/volt.jpg" />
</div>
<p>Volt был написан под вдохновлением от <a class="reference external" href="http://jinja.pocoo.org/">Jinja</a>, который был создан <a class="reference external" href="https://github.com/mitsuhiko">Armin Ronacher</a>. По этой причине многие разработчики будут чувствовать себя как дома, используя такой же синтаксис, что и в похожих шаблонизаторах. Возможности и синтаксис Volt были улучшены многими вещами и, конечно же, производительностью, к которым так привыкли разработчики, работая с Phalcon.</p>
<div class="section" id="id1">
<h2>Введение<a class="headerlink" href="#id1" title="Ссылка на этот заголовок">¶</a></h2>
<p>Представления на Volt компилируются в чистый PHP код, избавляя тем самым от необходимости писать его вручную:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/views/products/show.volt #}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">last_products</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">product</span> <span class="k">in</span> <span class="nv">products</span> <span class="cp">%}</span>
    * Name: <span class="cp">{{</span> <span class="nv">product.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">product.status</span> <span class="o">==</span> <span class="s2">&quot;Active&quot;</span> <span class="cp">%}</span>
       Price: <span class="cp">{{</span> <span class="nv">product.price</span> <span class="o">+</span> <span class="nv">product.taxes</span><span class="o">/</span><span class="m">100</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span>  <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span>  <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id2">
<h2>Подключение Volt<a class="headerlink" href="#id2" title="Ссылка на этот заголовок">¶</a></h2>
<p>Вы можете подключить Volt в компоненте представлений как любой другой шаблонизатор, используя при этом новое расширение для файлов, или всё то же стандартное .phtml:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Registering Volt as template engine</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">&#39;../app/views/&#39;</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;.volt&quot;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Phalcon\Mvc\View\Engine\Volt&#39;</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Использование стандартного расширения &#8221;.phtml&#8221;:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s2">&quot;.phtml&quot;</span> <span class="o">=&gt;</span> <span class="s1">&#39;Phalcon\Mvc\View\Engine\Volt&#39;</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="id3">
<h2>Основы<a class="headerlink" href="#id3" title="Ссылка на этот заголовок">¶</a></h2>
<p>Представление состоит из Volt кода, PHP и HTML. Набор специальных разделителей позволяет входить в режим Volt. Разделители {% ... %} используются для выполнения операторов, таких как циклы for и присваивания, а {{ ... }} выводит результат выражения в шаблон.</p>
<p>Ниже представлен небольшой шаблон, иллюстрирующий эти основные возможности:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# app/views/posts/show.phtml #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{{</span> <span class="nv">title</span> <span class="cp">}}</span> - A example blog<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="cp">{%</span> <span class="k">if</span> <span class="nv">show_navigation</span> <span class="cp">%}</span>
            <span class="nt">&lt;ul</span> <span class="na">id=</span><span class="s">&quot;navigation&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">for</span> <span class="nv">item</span> <span class="k">in</span> <span class="nv">menu</span> <span class="cp">%}</span>
                <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">item.href</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">item.caption</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
            <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
            <span class="nt">&lt;/ul&gt;</span>
        <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

        <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span>
        <span class="nt">&lt;/div&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Используя Phalcon\Mvc\View::setVar вы можете передать переменные из контроллера в представление. В предыдущем примере это были три переменные: title, menu и post:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PostsController</span> <span class="k">extends</span> <span class="nx">\Phalcon\Mvc\Controller</span>
<span class="p">{</span>

    <span class="k">public</span> <span class="k">function</span> <span class="nf">showAction</span><span class="p">()</span>
    <span class="p">{</span>

        <span class="nv">$post</span> <span class="o">=</span> <span class="nx">Post</span><span class="o">::</span><span class="na">findFirst</span><span class="p">();</span>

        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;title&quot;</span><span class="p">,</span> <span class="nv">$post</span><span class="o">-&gt;</span><span class="na">title</span><span class="p">);</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">setVar</span><span class="p">(</span><span class="s2">&quot;post&quot;</span><span class="p">,</span> <span class="nv">$post</span><span class="p">);</span>
        <span class="c1">// или</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">menu</span> <span class="o">=</span> <span class="nx">Menu</span><span class="o">::</span><span class="na">find</span><span class="p">();</span>
        <span class="nv">$this</span><span class="o">-&gt;</span><span class="na">view</span><span class="o">-&gt;</span><span class="na">show_navigation</span> <span class="o">=</span> <span class="k">true</span><span class="p">;</span>

    <span class="p">}</span>

<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="id4">
<h2>Переменные<a class="headerlink" href="#id4" title="Ссылка на этот заголовок">¶</a></h2>
<p>Переменные могут иметь аттрибуты, доступные при использовании синтаксиса: foo.bar. Если вы передаёте массивы, то обратиться к их элементам можно посредством квадратных скобок: foo[&#8216;bar&#8217;]</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post</span><span class="o">[</span><span class="s1">&#39;title&#39;</span><span class="o">]</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="id5">
<h2>Фильтры<a class="headerlink" href="#id5" title="Ссылка на этот заголовок">¶</a></h2>
<p>Вывод переменных можно форматировать или модифицировать при помощи фильтров. Для их применения используется оператор | (вертикальная черта):</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">post.title</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post.content</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">name</span><span class="o">|</span><span class="nf">capitalize</span><span class="o">|</span><span class="nf">trim</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
<p>Список встроенных в Volt фильтров:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Фильтр</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>e</td>
<td>Применяет к значению Phalcon\Escaper-&gt;escapeHtml</td>
</tr>
<tr class="row-odd"><td>escape</td>
<td>Применяет к значению Phalcon\Escaper-&gt;escapeHtml</td>
</tr>
<tr class="row-even"><td>escape_css</td>
<td>Применяет к значению Phalcon\Escaper-&gt;escapeCss</td>
</tr>
<tr class="row-odd"><td>escape_js</td>
<td>Применяет к значению Phalcon\Escaper-&gt;escapeJs</td>
</tr>
<tr class="row-even"><td>escape_attr</td>
<td>Применяет к значению Phalcon\Escaper-&gt;escapeHtmlAttr</td>
</tr>
<tr class="row-odd"><td>trim</td>
<td>Применяет к значению PHP-фукнцию <a class="reference external" href="http://www.php.net/manual/ru/function.trim.php">trim</a>, которая удаляет лишние пробелы</td>
</tr>
<tr class="row-even"><td>striptags</td>
<td>Применяет к значению PHP-фукнцию <a class="reference external" href="http://www.php.net/manual/ru/function.strip-tags.php">strip_tags</a>, удаляющую HTML тэги</td>
</tr>
<tr class="row-odd"><td>slashes</td>
<td>Применяет к значению PHP-фукнцию <a class="reference external" href="http://www.php.net/manual/ru/function.addslashes.php">addslashes</a>, экранирующую значение</td>
</tr>
<tr class="row-even"><td>stripslashes</td>
<td>Применяет к значению PHP-фукнцию <a class="reference external" href="http://www.php.net/manual/ru/function.stripslashes.php">stripslashes</a>, удаляющую экранирующие кавычки</td>
</tr>
<tr class="row-odd"><td>capitalize</td>
<td>Делает первую букву строки заглавной, используя PHP-фукнцию <a class="reference external" href="http://www.php.net/manual/ru/function.ucwords.php">ucwords</a></td>
</tr>
<tr class="row-even"><td>lower</td>
<td>Преобразует все символы строки к нижнему регистру</td>
</tr>
<tr class="row-odd"><td>upper</td>
<td>Преобразует все символы строки к верхнему регистру</td>
</tr>
<tr class="row-even"><td>length</td>
<td>Подсчитывает длину строки, или количество элементов в массиве/объекте</td>
</tr>
<tr class="row-odd"><td>nl2br</td>
<td>Изменяет \n на HTML вариант(&lt;br /&gt;). Применяет функцию <a class="reference external" href="http://www.php.net/manual/ru/function.nl2br.php">nl2br</a></td>
</tr>
<tr class="row-even"><td>sort</td>
<td>Sorts an array using the PHP function <a class="reference external" href="http://www.php.net/manual/ru/function.asort.php">asort</a></td>
</tr>
<tr class="row-odd"><td>keys</td>
<td>Возвращает ключи массива, используя <a class="reference external" href="http://www.php.net/manual/ru/function.array-keys.php">array_keys</a></td>
</tr>
<tr class="row-even"><td>join</td>
<td>Объединяет части массива, используя <a class="reference external" href="http://www.php.net/manual/ru/function.join.php">join</a></td>
</tr>
<tr class="row-odd"><td>format</td>
<td>Форматирует строку, используя <a class="reference external" href="http://www.php.net/manual/ru/function.sprintf.php">sprintf</a>.</td>
</tr>
<tr class="row-even"><td>json_encode</td>
<td>Преобразует значение в <a class="reference external" href="http://ru.wikipedia.org/wiki/JSON">JSON</a> с помощью функции <a class="reference external" href="http://www.php.net/manual/ru/function.json-encode.php">json_encode</a></td>
</tr>
<tr class="row-odd"><td>json_decode</td>
<td>Преобразует значение из <a class="reference external" href="http://ru.wikipedia.org/wiki/JSON">JSON</a> в PHP с помощью функции <a class="reference external" href="http://www.php.net/manual/ru/function.json-decode.php">json_decode</a></td>
</tr>
<tr class="row-even"><td>abs</td>
<td>Применяет к значению PHP-функцию <a class="reference external" href="http://www.php.net/manual/ru/function.abs.php">abs</a></td>
</tr>
<tr class="row-odd"><td>url_encode</td>
<td>Применяет к значению PHP-функцию <a class="reference external" href="http://www.php.net/manual/ru/function.urlencode.php">urlencode</a></td>
</tr>
<tr class="row-even"><td>default</td>
<td>Устанавливает значение по умолчанию, если полученное выражение пусто
(переменная не задана, или содержит пустое значение)</td>
</tr>
<tr class="row-odd"><td>convert_encoding</td>
<td>Преобразует строку из одной кодировки в другую</td>
</tr>
</tbody>
</table>
<p>Примеры:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="c">{# e или escape #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;&lt;h1&gt;Hello&lt;h1&gt;&quot;</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;&lt;h1&gt;Hello&lt;h1&gt;&quot;</span><span class="o">|</span><span class="nf">escape</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# trim #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;   hello   &quot;</span><span class="o">|</span><span class="nf">trim</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# striptags #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;&lt;h1&gt;Hello&lt;h1&gt;&quot;</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# slashes #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;&#39;this is a string&#39;&quot;</span><span class="o">|</span><span class="nf">slashes</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# stripslashes #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;\&#39;this is a string\&#39;&quot;</span><span class="o">|</span><span class="nf">stripslashes</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# capitalize #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;hello&quot;</span><span class="o">|</span><span class="nf">capitalize</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# lower #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;HELLO&quot;</span><span class="o">|</span><span class="nf">lower</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# upper #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;hello&quot;</span><span class="o">|</span><span class="nf">upper</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# length #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;robots&quot;</span><span class="o">|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x"></span>
<span class="cp">{{</span> <span class="o">[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">,</span> <span class="m">3</span><span class="o">]|</span><span class="nf">length</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# nl2br #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;some\ntext&quot;</span><span class="o">|</span><span class="nf">nl2br</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# sort filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">sorted</span><span class="o">=[</span><span class="m">3</span><span class="o">,</span> <span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">]|</span><span class="nf">sort</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# keys filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">keys</span><span class="o">=[</span><span class="s1">&#39;first&#39;</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">&#39;second&#39;</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">&#39;third&#39;</span><span class="o">:</span> <span class="m">3</span><span class="o">]|</span><span class="nf">keys</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# json_encode filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">robots</span><span class="o">|</span><span class="nf">json_encode</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# json_decode filter #}</span><span class="x"></span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">decoded</span><span class="o">=</span><span class="s1">&#39;{&quot;one&quot;:1,&quot;two&quot;:2,&quot;three&quot;:3}&#39;</span><span class="o">|</span><span class="nf">json_decode</span> <span class="cp">%}</span><span class="x"></span>

<span class="c">{# url_encode filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="nv">post.permanent_link</span><span class="o">|</span><span class="nf">url_encode</span> <span class="cp">}}</span><span class="x"></span>

<span class="c">{# convert_encoding filter #}</span><span class="x"></span>
<span class="cp">{{</span> <span class="s2">&quot;désolé&quot;</span><span class="o">|</span><span class="nf">convert_encoding</span><span class="o">(</span><span class="s1">&#39;utf8&#39;</span><span class="o">,</span> <span class="s1">&#39;latin1&#39;</span><span class="o">)</span> <span class="cp">}}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="id6">
<h2>Комментарии<a class="headerlink" href="#id6" title="Ссылка на этот заголовок">¶</a></h2>
<p>В шаблон можно добавить комментарии, используя разделители {# ... #}. Любой текст внутри них будет проигнорирован и не попадёт в вывод:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="c">{# note: this is a comment</span>
<span class="c">    {% set price = 100; %}</span>
<span class="c">#}</span><span class="x"></span>
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h2>Список управляющих конструкций<a class="headerlink" href="#id7" title="Ссылка на этот заголовок">¶</a></h2>
<p>Volt позволяет использовать в шаблонах набор основных, но мощных управляющих структур:</p>
<div class="section" id="for">
<h3>For<a class="headerlink" href="#for" title="Ссылка на этот заголовок">¶</a></h3>
<p>Цикл по всем элементам в последовательности. Пример ниже показывает, как пройти по набору &#8220;robots&#8221; и вывести их имена:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>циклы так же могут быть вложенными:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">for</span> <span class="nv">part</span> <span class="k">in</span> <span class="nv">robot.parts</span> <span class="cp">%}</span>
  Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
  <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Вы можете получить ключи значений массива так же, как и в PHP используя такой синтаксис:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;one&#39;</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">&#39;two&#39;</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">&#39;three&#39;</span><span class="o">:</span> <span class="m">3</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">name</span><span class="o">,</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="cp">%}</span>
  Name: <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Кроме того для выборочного прохода по элементам, можно определить условие &#8220;if&#8221;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">numbers</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;one&#39;</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">&#39;two&#39;</span><span class="o">:</span> <span class="m">2</span><span class="o">,</span> <span class="s1">&#39;three&#39;</span><span class="o">:</span> <span class="m">3</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="k">if</span> <span class="nv">value</span> <span class="o">&lt;</span> <span class="m">2</span> <span class="cp">%}</span>
  Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">name</span><span class="o">,</span> <span class="nv">value</span> <span class="k">in</span> <span class="nv">numbers</span> <span class="k">if</span> <span class="nv">name</span> <span class="p">!</span><span class="o">=</span> <span class="s1">&#39;two&#39;</span> <span class="cp">%}</span>
  Name: <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span> Value: <span class="cp">{{</span> <span class="nv">value</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Если &#8216;else&#8217; определяется внутри &#8216;for&#8217;, то этот блок будет выполнен в том случае, когда не будет произведено ни одной итерации:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
<span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
    There are no robots to show
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Альтернативный синтаксис:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    Robot: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> Part: <span class="cp">{{</span> <span class="nv">part.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> <span class="nt">&lt;br/&gt;</span>
<span class="cp">{%</span> <span class="k">elsefor</span> <span class="cp">%}</span>
    There are no robots to show
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id8">
<h3>Управление циклами<a class="headerlink" href="#id8" title="Ссылка на этот заголовок">¶</a></h3>
<p>Такие операторы как &#8216;break&#8217; and &#8216;continue&#8217; могут быть использованы для выхода из цикла вообще, или перехода к следующей итерации:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# пропустить робота с четным индексом #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span><span class="o">,</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">index</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">continue</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# выход из цикла при первом встреченном четном роботе #}</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span><span class="o">,</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">index</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{%</span> <span class="k">break</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
    ...
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="if">
<h3>If<a class="headerlink" href="#if" title="Ссылка на этот заголовок">¶</a></h3>
<p>Как и в PHP оператор &#8220;if&#8221; проверяет значение выражения на ложь или истину:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Cyborg Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">&quot;cyborg&quot;</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>Условие else тоже поддерживается:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="nt">&lt;h1&gt;</span>Robots<span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
<span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
  <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">&quot;cyborg&quot;</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span><span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">else</span> <span class="cp">%}</span>
  <span class="nt">&lt;li&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span> (not a cyborg)<span class="nt">&lt;/li&gt;</span>
  <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="nt">&lt;/ul&gt;</span>
</pre></div>
</div>
<p>Структура &#8220;elseif&#8221; может быть использована совместно с &#8220;if&#8221; для повторения функционала &#8220;switch&#8221;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">&quot;cyborg&quot;</span> <span class="cp">%}</span>
    Robot is a cyborg
<span class="cp">{%</span> <span class="k">elseif</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">&quot;virtual&quot;</span> <span class="cp">%}</span>
    Robot is virtual
<span class="cp">{%</span> <span class="k">elseif</span> <span class="nv">robot.type</span> <span class="o">==</span> <span class="s2">&quot;mechanical&quot;</span> <span class="cp">%}</span>
    Robot is mechanical
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id9">
<h3>Контекст цикла<a class="headerlink" href="#id9" title="Ссылка на этот заголовок">¶</a></h3>
<p>Внутри цикла &#8216;for&#8217; доступна специальная переменная, предоставляющая информацию о нём</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Переменная</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>loop.index</td>
<td>Текущая итерация цикла (нумерация с 1)</td>
</tr>
<tr class="row-odd"><td>loop.index0</td>
<td>Текущая итерация цикла (нумерация с 0)</td>
</tr>
<tr class="row-even"><td>loop.revindex</td>
<td>Номер итерации с конца цикла (нумерация с 1)</td>
</tr>
<tr class="row-odd"><td>loop.revindex0</td>
<td>Номер итерации с конца цикла (нумерация с 0)</td>
</tr>
<tr class="row-even"><td>loop.first</td>
<td>Возвращает true, если текущая итерация — первая</td>
</tr>
<tr class="row-odd"><td>loop.last</td>
<td>Возвращает true, если текущая итерация — последняя</td>
</tr>
<tr class="row-even"><td>loop.length</td>
<td>Количество элементов для итерирования</td>
</tr>
</tbody>
</table>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.first</span> <span class="cp">%}</span>
        <span class="nt">&lt;table&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;th&gt;</span>#<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Id<span class="nt">&lt;/th&gt;</span>
            <span class="nt">&lt;th&gt;</span>Name<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
        <span class="nt">&lt;tr&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nb">loop</span><span class="nv">.index</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">robot.id</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
            <span class="nt">&lt;td&gt;</span><span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span><span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nb">loop</span><span class="nv">.last</span> <span class="cp">%}</span>
        <span class="nt">&lt;/table&gt;</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id10">
<h2>Присваивания<a class="headerlink" href="#id10" title="Ссылка на этот заголовок">¶</a></h2>
<p>Переменные могут быть изменены в шаблоне. для этого используется оператор &#8220;set&#8221;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">fruits</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Apple&#39;</span><span class="o">,</span> <span class="s1">&#39;Banana&#39;</span><span class="o">,</span> <span class="s1">&#39;Orange&#39;</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">name</span> <span class="o">=</span> <span class="nv">robot.name</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Multiple assignments are allowed in the same instruction:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">fruits</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Apple&#39;</span><span class="o">,</span> <span class="s1">&#39;Banana&#39;</span><span class="o">,</span> <span class="s1">&#39;Orange&#39;</span><span class="o">],</span> <span class="nv">name</span> <span class="o">=</span> <span class="nv">robot.name</span><span class="o">,</span> <span class="nv">active</span> <span class="o">=</span> <span class="kp">true</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Additionally, you can use compound assignment operators:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">price</span> <span class="o">+=</span> <span class="m">100.00</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">age</span> <span class="o">*=</span> <span class="m">5</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The following operators are available:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Operator</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>=</td>
<td>Standard Assignment</td>
</tr>
<tr class="row-odd"><td>+=</td>
<td>Addition assignment</td>
</tr>
<tr class="row-even"><td>-=</td>
<td>Subtraction assignment</td>
</tr>
<tr class="row-odd"><td>*=</td>
<td>Multiplication assignment</td>
</tr>
<tr class="row-even"><td>/=</td>
<td>Division assignment</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id11">
<h2>Выражения<a class="headerlink" href="#id11" title="Ссылка на этот заголовок">¶</a></h2>
<p>Volt позволяет использовать базовый набор выражений, включая литералы.</p>
<p>Выражения вычисляются и выводятся с использованием разделителей &#8216;{{&#8216; и &#8216;}}&#8217;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="o">(</span><span class="m">1</span> <span class="o">+</span> <span class="m">1</span><span class="o">)</span> <span class="o">*</span> <span class="m">2</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>If an expression needs to be evaluated without be printed the &#8216;do&#8217; statement can be used:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">do</span> <span class="o">(</span><span class="m">1</span> <span class="o">+</span> <span class="m">1</span><span class="o">)</span> <span class="o">*</span> <span class="m">2</span> <span class="cp">%}</span>
</pre></div>
</div>
<div class="section" id="id12">
<h3>Литералы<a class="headerlink" href="#id12" title="Ссылка на этот заголовок">¶</a></h3>
<p>Поддерживаются следующие литералы:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Литералы</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&#8220;это строка&#8221;</td>
<td>Текст, заключенный в двойные или одинарные кавычки воспринимается как строка</td>
</tr>
<tr class="row-odd"><td>100.25</td>
<td>Числа, с десятичной частью воспринимаются как числа с плавающей запятой</td>
</tr>
<tr class="row-even"><td>100</td>
<td>Числа без десятичной части воспринимаются как целые</td>
</tr>
<tr class="row-odd"><td>false</td>
<td>Константа &#8220;false&#8221; воспринимается как булевое значение &#8220;false&#8221;</td>
</tr>
<tr class="row-even"><td>true</td>
<td>Константа &#8220;true&#8221; воспринимается как булевое значение &#8220;true&#8221;</td>
</tr>
<tr class="row-odd"><td>null</td>
<td>Константа &#8220;null&#8221; воспринимается как NULL-значение</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id13">
<h3>Массивы<a class="headerlink" href="#id13" title="Ссылка на этот заголовок">¶</a></h3>
<p>Если вы используете PHP 5.3 or 5.4, 5.5, то можете создавать массивы, перечисляя список значений в квадратных скобках:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# Простой массив #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">&#39;Apple&#39;</span><span class="o">,</span> <span class="s1">&#39;Banana&#39;</span><span class="o">,</span> <span class="s1">&#39;Orange&#39;</span><span class="o">]</span> <span class="cp">}}</span>

<span class="c">{# Еще один простой массив #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">&#39;Apple&#39;</span><span class="o">,</span> <span class="m">1</span><span class="o">,</span> <span class="m">2.5</span><span class="o">,</span> <span class="kp">false</span><span class="o">,</span> <span class="nv">null</span><span class="o">]</span> <span class="cp">}}</span>

<span class="c">{# Многомерный массив #}</span>
<span class="cp">{{</span> <span class="o">[[</span><span class="m">1</span><span class="o">,</span> <span class="m">2</span><span class="o">],</span> <span class="o">[</span><span class="m">3</span><span class="o">,</span> <span class="m">4</span><span class="o">],</span> <span class="o">[</span><span class="m">5</span><span class="o">,</span> <span class="m">6</span><span class="o">]]</span> <span class="cp">}}</span>

<span class="c">{# Хэш-массив #}</span>
<span class="cp">{{</span> <span class="o">[</span><span class="s1">&#39;first&#39;</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">&#39;second&#39;</span><span class="o">:</span> <span class="m">4</span><span class="o">/</span><span class="m">2</span><span class="o">,</span> <span class="s1">&#39;third&#39;</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span><span class="o">]</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Curly braces also can be used to define arrays or hashes:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">myArray</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;Apple&#39;</span><span class="o">,</span> <span class="s1">&#39;Banana&#39;</span><span class="o">,</span> <span class="s1">&#39;Orange&#39;</span><span class="o">}</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">set</span> <span class="nv">myHash</span> <span class="o">=</span> <span class="o">{</span><span class="s1">&#39;first&#39;</span><span class="o">:</span> <span class="m">1</span><span class="o">,</span> <span class="s1">&#39;second&#39;</span><span class="o">:</span> <span class="m">4</span><span class="o">/</span><span class="m">2</span><span class="o">,</span> <span class="s1">&#39;third&#39;</span><span class="o">:</span> <span class="s1">&#39;3&#39;</span><span class="o">}</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id14">
<h3>Математические операторы<a class="headerlink" href="#id14" title="Ссылка на этот заголовок">¶</a></h3>
<p>Вы можете производить вычисления в шаблонах, используя следующие операторы:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Оператор</th>
<th class="head">Оператор</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>+</td>
<td>Производит операцию сложения. {{ 2 + 3 }} вернёт 5</td>
</tr>
<tr class="row-odd"><td>-</td>
<td>Производит операцию вычитания. {{ 2 - 3 }} вернёт -1</td>
</tr>
<tr class="row-even"><td>*</td>
<td>Производит операцию умножения. {{ 2 * 3 }} вернёт 6</td>
</tr>
<tr class="row-odd"><td>/</td>
<td>Производит операцию деления. {{ 10 / 2 }} вернёт 5</td>
</tr>
<tr class="row-even"><td>%</td>
<td>Вычисляет остаток от деления целых чисел. {{ 10 % 3 }} вернёт 1</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id15">
<h3>Операторы сравнения<a class="headerlink" href="#id15" title="Ссылка на этот заголовок">¶</a></h3>
<p>Доступны следующие операторы сравнения:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Оператор</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>==</td>
<td>Проверяет равенство двух операндов</td>
</tr>
<tr class="row-odd"><td>!=</td>
<td>Проверяет неравенство двух операндов</td>
</tr>
<tr class="row-even"><td>&lt;&gt;</td>
<td>Проверяет неравенство двух операндов</td>
</tr>
<tr class="row-odd"><td>&gt;</td>
<td>Проверяет, что левый операнд больше, чем правый</td>
</tr>
<tr class="row-even"><td>&lt;</td>
<td>Проверяет, что левый операнд меньше, чем правый</td>
</tr>
<tr class="row-odd"><td>&lt;=</td>
<td>Проверяет, что левый операнд меньше или равен правому</td>
</tr>
<tr class="row-even"><td>&gt;=</td>
<td>Проверяет, что левый операнд больше или равен правому</td>
</tr>
<tr class="row-odd"><td>===</td>
<td>Проверяет строгое равенство операндов</td>
</tr>
<tr class="row-even"><td>!==</td>
<td>Проверяет строгое неравенство операндов</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id16">
<h3>Логические операторы<a class="headerlink" href="#id16" title="Ссылка на этот заголовок">¶</a></h3>
<p>Логические операторы полезны в выражении &#8220;if&#8221; чтобы объединить несколько проверок:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Оператор</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>or</td>
<td>Возвращает true, если левый или правый операнды возвращают true</td>
</tr>
<tr class="row-odd"><td>and</td>
<td>Возвращает true, если одновременно и левый, и правый операнды возвращают true</td>
</tr>
<tr class="row-even"><td>not</td>
<td>Отрицание выражения</td>
</tr>
<tr class="row-odd"><td>( выражение )</td>
<td>Скобки для группирования выражений</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id17">
<h3>Другие операторы<a class="headerlink" href="#id17" title="Ссылка на этот заголовок">¶</a></h3>
<p>Доступны так же дополнительные операторы:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Оператор</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>~</td>
<td>Конкатенация двух опернадов  {{ &#8220;hello &#8221; ~ &#8220;world&#8221; }}</td>
</tr>
<tr class="row-odd"><td>|</td>
<td>Примеяет фильтр, указанный справа к операнду слева {{ &#8220;hello&#8221;|uppercase }}</td>
</tr>
<tr class="row-even"><td>..</td>
<td>Создаёт диапазон значений {{ &#8216;a&#8217;..&#8217;z&#8217; }} {{ 1..10 }}</td>
</tr>
<tr class="row-odd"><td>is</td>
<td>То же самое, что и == (равно), также выполняет проверки (см. ниже)</td>
</tr>
<tr class="row-even"><td>in</td>
<td>Проверяет, что выражение содержится в другом выражении if &#8220;a&#8221; in &#8220;abc&#8221;</td>
</tr>
<tr class="row-odd"><td>is not</td>
<td>То же самое, что и != (не равно)</td>
</tr>
<tr class="row-even"><td>&#8216;a&#8217; ? &#8216;b&#8217; : &#8216;c&#8217;</td>
<td>Тернарный оператор. Аналогичен тернароному оператору в PHP</td>
</tr>
<tr class="row-odd"><td>++</td>
<td>Increments a value</td>
</tr>
<tr class="row-even"><td>&#8211;</td>
<td>Decrements a value</td>
</tr>
</tbody>
</table>
<p>Пример ниже показывает их использование:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="s1">&#39;Astro Boy&#39;</span><span class="o">,</span> <span class="s1">&#39;Terminator&#39;</span><span class="o">,</span> <span class="s1">&#39;C3PO&#39;</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">index</span> <span class="k">in</span> <span class="m">0.</span><span class="nv">.robots</span><span class="o">|</span><span class="nf">length</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">robots</span><span class="o">[</span><span class="nv">index</span><span class="o">]</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="s2">&quot;Name: &quot;</span> <span class="o">~</span> <span class="nv">robots</span><span class="o">[</span><span class="nv">index</span><span class="o">]</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id18">
<h2>Проверки<a class="headerlink" href="#id18" title="Ссылка на этот заголовок">¶</a></h2>
<p>Проверки могут быть использованы для определения соответствия переменной какому-то ожидаемому значению. Оператор &#8220;is&#8221; используется для выполнения проверок:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="s1">&#39;1&#39;</span><span class="o">:</span> <span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="s1">&#39;2&#39;</span><span class="o">:</span> <span class="s1">&#39;Astro Boy&#39;</span><span class="o">,</span> <span class="s1">&#39;3&#39;</span><span class="o">:</span> <span class="s1">&#39;Terminator&#39;</span><span class="o">,</span> <span class="s1">&#39;4&#39;</span><span class="o">:</span> <span class="s1">&#39;C3PO&#39;</span><span class="o">]</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">position</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">position</span> <span class="k">is</span> <span class="nf">odd</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>The following built-in tests are available in Volt:</p>
<table border="1" class="docutils">
<colgroup>
<col width="19%" />
<col width="81%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Проверка</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>defined</td>
<td>Проверяет существование переменной (isset)</td>
</tr>
<tr class="row-odd"><td>empty</td>
<td>Проверяет, если значение пусто</td>
</tr>
<tr class="row-even"><td>even</td>
<td>Проверяет чётность целочисленного значения</td>
</tr>
<tr class="row-odd"><td>odd</td>
<td>Проверяет нечётность целочисленного значения</td>
</tr>
<tr class="row-even"><td>numeric</td>
<td>Проверяет, является ли значение числом</td>
</tr>
<tr class="row-odd"><td>scalar</td>
<td>Проверяет, что значение скаляр (не массив или объект)</td>
</tr>
<tr class="row-even"><td>iterable</td>
<td>Проверяет, является ли значение итерируемым, т.е. может быть использовано в цикле &#8220;for&#8221;</td>
</tr>
<tr class="row-odd"><td>divisibleby</td>
<td>Проверяет, делится ли значение на другое без остатка</td>
</tr>
<tr class="row-even"><td>sameas</td>
<td>Проверяет, что значение совпадает с другим</td>
</tr>
<tr class="row-odd"><td>type</td>
<td>Проверяет специфичный тип переменной</td>
</tr>
</tbody>
</table>
<p>Больше примеров:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot</span> <span class="k">is</span> <span class="nf">defined</span> <span class="cp">%}</span>
    The robot variable is defined
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">if</span> <span class="nv">robot</span> <span class="k">is</span> <span class="nf">empty</span> <span class="cp">%}</span>
    The robot is null or isn&#39;t defined
<span class="cp">{%</span> <span class="k">endif</span> <span class="o">}</span>

<span class="o">{</span><span class="p">%</span> <span class="nv">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">&#39;Astroy Boy&#39;</span><span class="o">,</span> <span class="m">3</span><span class="o">:</span> <span class="s1">&#39;Bender&#39;</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">even</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="o">}</span>
<span class="o">{</span><span class="p">%</span> <span class="nv">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">&#39;Astroy Boy&#39;</span><span class="o">,</span> <span class="m">3</span><span class="o">:</span> <span class="s1">&#39;Bender&#39;</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">odd</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="o">}</span>
<span class="o">{</span><span class="p">%</span> <span class="nv">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">for</span> <span class="nv">key</span><span class="o">,</span> <span class="nv">name</span> <span class="k">in</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">&#39;Astroy Boy&#39;</span><span class="o">,</span> <span class="s1">&#39;third&#39;</span><span class="o">:</span> <span class="s1">&#39;Bender&#39;</span><span class="o">]</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">if</span> <span class="nv">key</span> <span class="k">is</span> <span class="nf">numeric</span> <span class="cp">%}</span>
        <span class="cp">{{</span> <span class="nv">name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endif</span> <span class="o">}</span>
<span class="o">{</span><span class="p">%</span> <span class="nv">endfor</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">robots</span> <span class="o">=</span> <span class="o">[</span><span class="m">1</span><span class="o">:</span> <span class="s1">&#39;Voltron&#39;</span><span class="o">,</span> <span class="m">2</span><span class="o">:</span> <span class="s1">&#39;Astroy Boy&#39;</span><span class="o">]</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">robots</span> <span class="k">is</span> <span class="nf">iterable</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">for</span> <span class="nv">robot</span> <span class="k">in</span> <span class="nv">robots</span> <span class="cp">%}</span>
        ...
    <span class="cp">{%</span> <span class="k">endfor</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">world</span> <span class="o">=</span> <span class="s2">&quot;hello&quot;</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">world</span> <span class="k">is</span> <span class="nf">sameas</span><span class="o">(</span><span class="s2">&quot;hello&quot;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="s2">&quot;it&#39;s hello&quot;</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">set</span> <span class="nv">external</span> <span class="o">=</span> <span class="kp">false</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">if</span> <span class="nv">external</span> <span class="k">is</span> <span class="nf">type</span><span class="o">(</span><span class="s1">&#39;boolean&#39;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{{</span> <span class="s2">&quot;external is false or true&quot;</span> <span class="cp">}}</span>
<span class="cp">{%</span> <span class="k">endif</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="macros">
<h2>Macros<a class="headerlink" href="#macros" title="Ссылка на этот заголовок">¶</a></h2>
<p>Макросы могут быть использованы для избежания повторений в шаблоне, они действуют как функции PHP, они могут получать параметры и возвращать значения:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# Макрос &quot;Вывода списка ссылок на похожие темы&quot; #}</span>
 <span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">related_links</span><span class="o">)</span> <span class="cp">%}</span>
     <span class="nt">&lt;ul&gt;</span>
         <span class="cp">{%</span>- <span class="k">for</span> <span class="nv">link</span> <span class="k">in</span> <span class="nv">related_links</span> <span class="cp">%}</span>
             <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">url</span><span class="o">(</span><span class="nv">link.url</span><span class="o">)</span> <span class="cp">}}</span><span class="s">&quot;</span> <span class="na">title=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">link.title</span><span class="o">|</span><span class="nf">striptags</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">link.text</span> <span class="cp">}}</span><span class="nt">&lt;/a&gt;&lt;/li&gt;</span>
         <span class="cp">{%</span>- <span class="k">endfor</span> <span class="cp">%}</span>
     <span class="nt">&lt;/ul&gt;</span>
 <span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

 <span class="c">{# Используем макрос &quot;Вывода списка ссылок на пожие темы&quot; #}</span>
 <span class="cp">{{</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">links</span><span class="o">)</span> <span class="cp">}}</span>

 <span class="nt">&lt;div&gt;</span>This is the content<span class="nt">&lt;/div&gt;</span>

 <span class="c">{# Используем макрос &quot;Вывода списка ссылок на похожие темы&quot; снова #}</span>
 <span class="cp">{{</span> <span class="nv">related_bar</span><span class="o">(</span><span class="nv">links</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>При использовании макросов, параметры могут быть переданы по имени:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">error_messages</span><span class="o">(</span><span class="nv">message</span><span class="o">,</span> <span class="nv">field</span><span class="o">,</span> <span class="nv">type</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="nt">&lt;div&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;error-type&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">type</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;error-field&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">field</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
        <span class="nt">&lt;span</span> <span class="na">class=</span><span class="s">&quot;error-message&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">message</span> <span class="cp">}}</span><span class="nt">&lt;/span&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Использование макроса #}</span>
<span class="cp">{{</span> <span class="nv">error_messages</span><span class="o">(</span><span class="s1">&#39;type&#39;</span><span class="o">:</span> <span class="s1">&#39;Invalid&#39;</span><span class="o">,</span> <span class="s1">&#39;message&#39;</span><span class="o">:</span> <span class="s1">&#39;The name is invalid&#39;</span><span class="o">,</span> <span class="s1">&#39;field&#39;</span><span class="o">:</span> <span class="s1">&#39;name&#39;</span><span class="o">)</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>Макросы могут возвращать значения:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">my_input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">return</span> <span class="nv">text_field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Использование макроса #}</span>
<span class="cp">{{</span> <span class="s1">&#39;&lt;p&gt;&#39;</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;input-text&#39;</span><span class="o">)</span> <span class="o">~</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span> <span class="cp">}}</span>
</pre></div>
</div>
<p>И задавать параметры по умолчанию:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span>- <span class="k">macro</span> <span class="nv">my_input</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="nv">class</span><span class="o">=</span><span class="s2">&quot;input-text&quot;</span><span class="o">)</span> <span class="cp">%}</span>
    <span class="cp">{%</span> <span class="k">return</span> <span class="nv">text_field</span><span class="o">(</span><span class="nv">name</span><span class="o">,</span> <span class="s1">&#39;class&#39;</span><span class="o">:</span> <span class="nv">class</span><span class="o">)</span> <span class="cp">%}</span>
<span class="cp">{%</span>- <span class="k">endmacro</span> <span class="cp">%}</span>

<span class="c">{# Использование макроса#}</span>
<span class="cp">{{</span> <span class="s1">&#39;&lt;p&gt;&#39;</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">)</span> <span class="o">~</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span> <span class="cp">}}</span>
<span class="cp">{{</span> <span class="s1">&#39;&lt;p&gt;&#39;</span> <span class="o">~</span> <span class="nv">my_input</span><span class="o">(</span><span class="s1">&#39;name&#39;</span><span class="o">,</span> <span class="s1">&#39;input-text&#39;</span><span class="o">)</span> <span class="o">~</span> <span class="s1">&#39;&lt;/p&gt;&#39;</span> <span class="cp">}}</span>
</pre></div>
</div>
</div>
<div class="section" id="tag-helpers">
<h2>Использование Tag Helpers<a class="headerlink" href="#tag-helpers" title="Ссылка на этот заголовок">¶</a></h2>
<p>Volt сильно связан с  <a class="reference internal" href="tags.html"><em>Phalcon\Tag</em></a>, поэтому можно легко использовать в Volt-шаблонах helpers, предоставляемые этим компонентом:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{{</span> <span class="nv">javascript_include</span><span class="o">(</span><span class="s2">&quot;js/jquery.js&quot;</span><span class="o">)</span> <span class="cp">}}</span>

<span class="cp">{{</span> <span class="nv">form</span><span class="o">(</span><span class="s1">&#39;products/save&#39;</span><span class="o">,</span> <span class="s1">&#39;method&#39;</span><span class="o">:</span> <span class="s1">&#39;post&#39;</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">{{</span> <span class="nv">text_field</span><span class="o">(</span><span class="s2">&quot;name&quot;</span><span class="o">,</span> <span class="s2">&quot;size&quot;</span><span class="o">:</span> <span class="m">32</span><span class="o">)</span> <span class="cp">}}</span>

    <span class="nt">&lt;label&gt;</span>Type<span class="nt">&lt;/label&gt;</span>
    <span class="cp">{{</span> <span class="nv">select</span><span class="o">(</span><span class="s2">&quot;type&quot;</span><span class="o">,</span> <span class="nv">productTypes</span><span class="o">,</span> <span class="s1">&#39;using&#39;</span><span class="o">:</span> <span class="o">[</span><span class="s1">&#39;id&#39;</span><span class="o">,</span> <span class="s1">&#39;name&#39;</span><span class="o">])</span> <span class="cp">}}</span>

    <span class="cp">{{</span> <span class="nv">submit_button</span><span class="o">(</span><span class="s1">&#39;Send&#39;</span><span class="o">)</span> <span class="cp">}}</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>В результате будет сгенерирован следующий PHP-код:</p>
<div class="highlight-html+php"><div class="highlight"><pre><span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">javascriptInclude</span><span class="p">(</span><span class="s2">&quot;js/jquery.js&quot;</span><span class="p">)</span> <span class="cp">?&gt;</span>

<span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">form</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;products/save&#39;</span><span class="p">,</span> <span class="s1">&#39;method&#39;</span> <span class="o">=&gt;</span> <span class="s1">&#39;post&#39;</span><span class="p">));</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;label&gt;</span>Name<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">textField</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;size&#39;</span> <span class="o">=&gt;</span> <span class="mi">32</span><span class="p">));</span> <span class="cp">?&gt;</span>

    <span class="nt">&lt;label&gt;</span>Type<span class="nt">&lt;/label&gt;</span>
    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">select</span><span class="p">(</span><span class="k">array</span><span class="p">(</span><span class="s1">&#39;type&#39;</span><span class="p">,</span> <span class="nv">$productTypes</span><span class="p">,</span> <span class="s1">&#39;using&#39;</span> <span class="o">=&gt;</span> <span class="k">array</span><span class="p">(</span><span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;name&#39;</span><span class="p">)));</span> <span class="cp">?&gt;</span>

    <span class="cp">&lt;?php</span> <span class="k">echo</span> <span class="nx">Phalcon\Tag</span><span class="o">::</span><span class="na">submitButton</span><span class="p">(</span><span class="s1">&#39;Send&#39;</span><span class="p">);</span> <span class="cp">?&gt;</span>

<span class="nt">&lt;/form&gt;</span>
</pre></div>
</div>
<p>Для вызова PhalconTag helper, вам необходимо лишь вызвать соответсвующие версии методов не в Camelcase:</p>
<table border="1" class="docutils">
<colgroup>
<col width="61%" />
<col width="39%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Метод</th>
<th class="head">Функция Volt</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Phalcon\Tag::linkTo</td>
<td>link_to</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::textField</td>
<td>text_field</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::passwordField</td>
<td>password_field</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::hiddenField</td>
<td>hidden_field</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::fileField</td>
<td>file_field</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::checkField</td>
<td>check_field</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::radioField</td>
<td>radio_field</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::dateField</td>
<td>date_field</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::emailField</td>
<td>email_field</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::numberField</td>
<td>number_field</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::submitButton</td>
<td>submit_button</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::selectStatic</td>
<td>select_static</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::select</td>
<td>select</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::textArea</td>
<td>text_area</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::form</td>
<td>form</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::endForm</td>
<td>end_form</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::getTitle</td>
<td>get_title</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::stylesheetLink</td>
<td>stylesheet_link</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::javascriptInclude</td>
<td>javascript_include</td>
</tr>
<tr class="row-odd"><td>Phalcon\Tag::image</td>
<td>image</td>
</tr>
<tr class="row-even"><td>Phalcon\Tag::friendlyTitle</td>
<td>friendly_title</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id19">
<h2>Функции<a class="headerlink" href="#id19" title="Ссылка на этот заголовок">¶</a></h2>
<p>В Volt доступны перечисленные ниже встроенные функции:</p>
<table border="1" class="docutils">
<colgroup>
<col width="22%" />
<col width="78%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Название</th>
<th class="head">Описание</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>content</td>
<td>Включает результат рендера предыдущего этапа</td>
</tr>
<tr class="row-odd"><td>get_content</td>
<td>То же самое, что и &#8216;content&#8217;</td>
</tr>
<tr class="row-even"><td>partial</td>
<td>Динамически загружает partial представление в текущий шаблон</td>
</tr>
<tr class="row-odd"><td>super</td>
<td>Отрисовывает содержимое родительского блока</td>
</tr>
<tr class="row-even"><td>time</td>
<td>Вызывает одноимённую PHP-функцию</td>
</tr>
<tr class="row-odd"><td>date</td>
<td>Вызывает одноимённую PHP-функцию</td>
</tr>
<tr class="row-even"><td>dump</td>
<td>Вызывает PHP-функцию &#8216;var_dump&#8217;</td>
</tr>
<tr class="row-odd"><td>version</td>
<td>Возвращает текущую версию фреймворка</td>
</tr>
<tr class="row-even"><td>constant</td>
<td>Читает PHP константу</td>
</tr>
<tr class="row-odd"><td>url</td>
<td>Генерирует URL, используя сервис &#8216;url&#8217;</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="id20">
<h2>Связывание с представлениями<a class="headerlink" href="#id20" title="Ссылка на этот заголовок">¶</a></h2>
<p>Кроме того, Volt связан с <a class="reference internal" href="views.html"><em>Phalcon\Mvc\View</em></a>, что позволяет вам поиграться с иерархией и включением partials:</p>
<div class="highlight-html+php"><div class="highlight"><pre>{{ content() }}

<span class="c">&lt;!-- Simple include of a partial --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>{{ partial(&quot;partials/footer&quot;) }}<span class="nt">&lt;/div&gt;</span>

<span class="c">&lt;!-- Passing extra variables --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>{{ partial(&quot;partials/footer&quot;, [&#39;links&#39;: $links]) }}<span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<p>Partial включается в момент выполнения, Volt так же предоставляет &#8220;include&#8221;, которая собирает содержимое представления и возвращает его в виде включаемой части:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# Simple include of a partial #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;partials/footer&quot;</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>

<span class="c">{# Passing extra variables #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;partials/footer&quot;</span> <span class="k">with</span> <span class="o">[</span><span class="s1">&#39;links&#39;</span><span class="o">:</span> <span class="nv">links</span><span class="o">]</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
<div class="section" id="include">
<h3>Include<a class="headerlink" href="#include" title="Ссылка на этот заголовок">¶</a></h3>
<p>&#8216;include&#8217; has a special behavior that will help us improve performance a bit when using Volt, if you specify the extension
when including the file and it exists when the template is compiled, Volt can inline the contents of the template in the parent
template where it&#8217;s included. Templates aren&#8217;t inlined if the &#8216;include&#8217; have variables passed with &#8216;with&#8217;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# The contents of &#39;partials/footer.volt&#39; is compiled and inlined #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">include</span> <span class="s2">&quot;partials/footer.volt&quot;</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id21">
<h2>Наследование шаблонов<a class="headerlink" href="#id21" title="Ссылка на этот заголовок">¶</a></h2>
<p>С помощью наследования шаблонов вы можете создавать базовые шаблоны, которые могут быть расширены другими шаблонами, что позволит повторно использовать уже написанный код. Базовый шаблон определяет <em>блоки</em>, которые могут быть переопределены дочерними шаблонами. Предположим, что у нас есть некоторый базовый шаблон:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# templates/base.volt #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span>
            <span class="nt">&lt;link</span> <span class="na">rel=</span><span class="s">&quot;stylesheet&quot;</span> <span class="na">href=</span><span class="s">&quot;style.css&quot;</span> <span class="nt">/&gt;</span>
        <span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;title&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span> - My Webpage<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span><span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
            <span class="cp">{%</span> <span class="k">block</span> <span class="nv">footer</span> <span class="cp">%}</span><span class="ni">&amp;copy;</span> Copyright 2012, All rights reserved.<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Заменяя блоки, мы расширим базовый шаблон другим:</p>
<div class="highlight-jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;templates/base.volt&quot;</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">title</span> <span class="cp">%}</span><span class="x">Index</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">head</span> <span class="cp">%}</span><span class="x">&lt;style type=&quot;text/css&quot;&gt;.important { color: #336699; }&lt;/style&gt;</span><span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span><span class="x"></span>
<span class="x">    &lt;h1&gt;Index&lt;/h1&gt;</span>
<span class="x">    &lt;p class=&quot;important&quot;&gt;Welcome on my awesome homepage.&lt;/p&gt;</span>
<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span><span class="x"></span>
</pre></div>
</div>
<p>Не обязательно заменять все блоки дочерними шаблонами, можно только те, которые необходимо. В результате, вывод будет таким:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;style </span><span class="na">type=</span><span class="s">&quot;text/css&quot;</span><span class="nt">&gt;</span><span class="nc">.important</span> <span class="p">{</span> <span class="k">color</span><span class="o">:</span> <span class="m">#336699</span><span class="p">;</span> <span class="p">}</span><span class="nt">&lt;/style&gt;</span>
        <span class="nt">&lt;title&gt;</span>Index - My Webpage<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;content&quot;</span><span class="nt">&gt;</span>
            <span class="nt">&lt;h1&gt;</span>Index<span class="nt">&lt;/h1&gt;</span>
            <span class="nt">&lt;p</span> <span class="na">class=</span><span class="s">&quot;important&quot;</span><span class="nt">&gt;</span>Welcome on my awesome homepage.<span class="nt">&lt;/p&gt;</span>
        <span class="nt">&lt;/div&gt;</span>
        <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;footer&quot;</span><span class="nt">&gt;</span>
            <span class="ni">&amp;copy;</span> Copyright 2012, All rights reserved.
        <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<div class="section" id="id22">
<h3>Множественное наследование<a class="headerlink" href="#id22" title="Ссылка на этот заголовок">¶</a></h3>
<p>Шаблоны, которые наследуют другие шаблоны, так же могут быть унаследованы. Это иллюстрирует следующий пример:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# main.volt #}</span>
<span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>
        <span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Шаблон &#8220;layout.volt&#8221; наследует &#8220;main.volt&#8221;</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# layout.volt #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;main.volt&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="nt">&lt;h1&gt;</span>Table of contents<span class="nt">&lt;/h1&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Финальное представление, наследующее &#8220;layout.volt&#8221;:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# index.volt #}</span>
<span class="cp">{%</span> <span class="k">extends</span> <span class="s2">&quot;layout.volt&quot;</span> <span class="cp">%}</span>

<span class="cp">{%</span> <span class="k">block</span> <span class="nv">content</span> <span class="cp">%}</span>

    <span class="cp">{{</span> <span class="nb">super</span><span class="o">()</span> <span class="cp">}}</span>

    <span class="nt">&lt;ul&gt;</span>
        <span class="nt">&lt;li&gt;</span>Some option<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;li&gt;</span>Some other option<span class="nt">&lt;/li&gt;</span>
    <span class="nt">&lt;/ul&gt;</span>

<span class="cp">{%</span> <span class="k">endblock</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Отрисовка &#8220;index.volt&#8221;:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="cp">&lt;!DOCTYPE html&gt;</span>
<span class="nt">&lt;html&gt;</span>
    <span class="nt">&lt;head&gt;</span>
        <span class="nt">&lt;title&gt;</span>Title<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;/head&gt;</span>
    <span class="nt">&lt;body&gt;</span>

        <span class="nt">&lt;h1&gt;</span>Table of contents<span class="nt">&lt;/h1&gt;</span>

        <span class="nt">&lt;ul&gt;</span>
            <span class="nt">&lt;li&gt;</span>Some option<span class="nt">&lt;/li&gt;</span>
            <span class="nt">&lt;li&gt;</span>Some other option<span class="nt">&lt;/li&gt;</span>
        <span class="nt">&lt;/ul&gt;</span>

    <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</pre></div>
</div>
<p>Обратите внимание на вызов функции &#8220;super()&#8221;. Эта функция позволяет отрисовать содержимое родительского блока.</p>
<p>Как и partials, путь, установленный в &#8220;extends&#8221; — это путь относительно текущей папки с представлениями (т.е. app/views/).</p>
<blockquote class="highlights">
<div>По умолчанию и из соображений производительности, Volt проверяет только изменения в дочерних шаблонах, чтобы понять, когда нужно снова пересобрать PHP, поэтому рекомендуется инициализировать Volt с опцией &#8216;compileAlways&#8217; =&gt; true. Таким образом, шаблоны компилируются с учётом изменений родительского шаблона.</div></blockquote>
</div>
</div>
<div class="section" id="id23">
<h2>Режим автоматического экранирования<a class="headerlink" href="#id23" title="Ссылка на этот заголовок">¶</a></h2>
<p>Вы можете включить режим автоматического экранирования всех выводимых в блоке переменных:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre>Manually escaped: <span class="cp">{{</span> <span class="nv">robot.name</span><span class="o">|</span><span class="nf">e</span> <span class="cp">}}</span>

<span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">true</span> <span class="cp">%}</span>
    Autoescaped: <span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">autoescape</span> <span class="kp">false</span> <span class="cp">%}</span>
        No Autoescaped: <span class="cp">{{</span> <span class="nv">robot.name</span> <span class="cp">}}</span>
    <span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
<span class="cp">{%</span> <span class="k">endautoescape</span> <span class="cp">%}</span>
</pre></div>
</div>
</div>
<div class="section" id="id24">
<h2>Настройка шаблонизатора Volt<a class="headerlink" href="#id24" title="Ссылка на этот заголовок">¶</a></h2>
<p>Volt можно настроить так, чтобы изменить его поведение по умолчанию. В следующем примере объясняется, как это можно сделать:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">use</span> <span class="nx">Phalcon\Mvc\View</span><span class="p">,</span>
    <span class="nx">Phalcon\Mvc\View\Engine\Volt</span><span class="p">;</span>

<span class="c1">//Register Volt as a service</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;voltService&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">)</span> <span class="p">{</span>

    <span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

    <span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;compiledPath&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;../app/compiled-templates/&quot;</span><span class="p">,</span>
        <span class="s2">&quot;compiledExtension&quot;</span> <span class="o">=&gt;</span> <span class="s2">&quot;.compiled&quot;</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$volt</span><span class="p">;</span>
<span class="p">});</span>

<span class="c1">//Register Volt as template engine</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">&#39;../app/views/&#39;</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;.volt&quot;</span> <span class="o">=&gt;</span> <span class="s1">&#39;voltService&#39;</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Если вы не хотите использовать Volt в качестве сервиса, вы можете передать при регистрации шаблонизатора анонимную функцию, вместо имени сервиса:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Регистрация Volt в качестве шаблонизатора с анонимной функцией</span>
<span class="nv">$di</span><span class="o">-&gt;</span><span class="na">set</span><span class="p">(</span><span class="s1">&#39;view&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="nv">$view</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View</span><span class="p">();</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">setViewsDir</span><span class="p">(</span><span class="s1">&#39;../app/views/&#39;</span><span class="p">);</span>

    <span class="nv">$view</span><span class="o">-&gt;</span><span class="na">registerEngines</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
        <span class="s2">&quot;.volt&quot;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">)</span> <span class="p">{</span>
            <span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

            <span class="c1">// тут установка каких-то настроек</span>

            <span class="k">return</span> <span class="nv">$volt</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">));</span>

    <span class="k">return</span> <span class="nv">$view</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>В Volt могут быть следующие опции:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="80%" />
<col width="9%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Опция</th>
<th class="head">Описание</th>
<th class="head">По умолчанию</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>compiledPath</td>
<td>Путь для записи скомпилированных шаблонов</td>
<td>./</td>
</tr>
<tr class="row-odd"><td>compiledExtension</td>
<td>Дополнительное расширение, добавляемое к скомпилированным PHP-файлам</td>
<td>.php</td>
</tr>
<tr class="row-even"><td>compiledSeparator</td>
<td>Volt заменяет разделители папок / и \ этим разделителем для создания одного файла в папке скомпилированных PHP файлов</td>
<td>%%</td>
</tr>
<tr class="row-odd"><td>stat</td>
<td>Если Phalcon должен проверять, существуют ли различия между файлом шаблона и его скомпилированным результатом</td>
<td>true</td>
</tr>
<tr class="row-even"><td>compileAlways</td>
<td>Указывает Volt, должны ли шаблоны собираться на каждый запрос, или только тогда, когда они изменяются</td>
<td>false</td>
</tr>
<tr class="row-odd"><td>prefix</td>
<td>Позволяет добавлять префикс к шаблонам в папке скомпилированных PHP файлов</td>
<td>null</td>
</tr>
</tbody>
</table>
<p>The compilation path is generated according to the above options, if the developer wants total freedom defining the compilation path,
an anonymous function can be used to generate the compilation path, this function receives the relative path to the template in the
views directory. The following examples show how to change the compilation path dynamically:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Just append the .php extension to the template path</span>
<span class="c1">// leaving the compiled templates in the same directory</span>
<span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;compiledPath&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nv">$templatePath</span> <span class="o">.</span> <span class="s1">&#39;.php&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">));</span>

<span class="c1">// ​​Recursively create the same structure in another directory</span>
<span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="s1">&#39;compiledPath&#39;</span> <span class="o">=&gt;</span> <span class="k">function</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">)</span> <span class="p">{</span>
        <span class="nv">$dirName</span> <span class="o">=</span> <span class="nb">dirname</span><span class="p">(</span><span class="nv">$templatePath</span><span class="p">);</span>
        <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">is_dir</span><span class="p">(</span><span class="s1">&#39;cache/&#39;</span> <span class="o">.</span> <span class="nv">$dirName</span><span class="p">))</span> <span class="p">{</span>
            <span class="nb">mkdir</span><span class="p">(</span><span class="s1">&#39;cache/&#39;</span> <span class="o">.</span> <span class="nv">$dirName</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="s1">&#39;cache/&#39;</span> <span class="o">.</span> <span class="nv">$dirName</span> <span class="o">.</span> <span class="s1">&#39;/&#39;</span><span class="o">.</span> <span class="nv">$templatePath</span> <span class="o">.</span> <span class="s1">&#39;.php&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">));</span>
</pre></div>
</div>
</div>
<div class="section" id="id25">
<h2>Расширение Volt<a class="headerlink" href="#id25" title="Ссылка на этот заголовок">¶</a></h2>
<p>В отличие от других шаблонизаторов, Volt не требуется для запуска скомпилированных шаблонов. После того, как шаблон был собран, он больше никак не зависит от Volt. Иными словами, он используется лишь в качестве компилятора для PHP-шаблонов.</p>
<p>Volt-компилятор позволяет вам расширить его, добавив больше функций, проверки или фильтр к уже существующим.</p>
<div class="section" id="id26">
<h3>Функции<a class="headerlink" href="#id26" title="Ссылка на этот заголовок">¶</a></h3>
<p>Функции действуют как обычные PHP-функции, поэтому им требуется строковое имя, разрешенное для функций в PHP. Функции можно добавить двумя способами: передать простое строчное имя, или использовать анонимную функцию. Любой способ должен возращать допустимое PHP-выражение.</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$volt</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt</span><span class="p">(</span><span class="nv">$view</span><span class="p">,</span> <span class="nv">$di</span><span class="p">);</span>

<span class="nv">$compiler</span> <span class="o">=</span> <span class="nv">$volt</span><span class="o">-&gt;</span><span class="na">getCompiler</span><span class="p">();</span>

<span class="c1">// Тут к функции &#39;shuffle&#39; в Volt привязывается PHP-функция &#39;str_shuffle&#39;</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;shuffle&#39;</span><span class="p">,</span> <span class="s1">&#39;str_shuffle&#39;</span><span class="p">);</span>
</pre></div>
</div>
<p>При регистрации функции, как анонимной, мы используем $resolvedArgs для передачи аргументов точно так же, как они были приняты:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;widget&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;MyLibrary\Widgets::get(&#39;</span><span class="o">.</span><span class="nv">$resolvedArgs</span><span class="o">.</span><span class="s1">&#39;)&#39;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Учитывайте, что параметры независимы или не переданы:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;repeat&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="k">use</span> <span class="p">(</span><span class="nv">$compiler</span><span class="p">)</span> <span class="p">{</span>

    <span class="c1">// Получение первого параметра</span>
    <span class="nv">$firstArgument</span> <span class="o">=</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">expression</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s1">&#39;expr&#39;</span><span class="p">]);</span>

    <span class="c1">// Проверка, что второй параметр был передан</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">1</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$secondArgument</span> <span class="o">=</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">expression</span><span class="p">(</span><span class="nv">$exprArgs</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s1">&#39;expr&#39;</span><span class="p">]);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="c1">// По умолчанию используется &#39;10&#39;</span>
        <span class="nv">$secondArgument</span> <span class="o">=</span> <span class="s1">&#39;10&#39;</span><span class="p">;</span>
    <span class="p">}</span>

    <span class="k">return</span> <span class="s1">&#39;str_repeat(&#39;</span> <span class="o">.</span> <span class="nv">$firstArgument</span> <span class="o">.</span> <span class="s1">&#39;, &#39;</span> <span class="o">.</span> <span class="nv">$secondArgument</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Генерация кода на основе некоторой готовой функции:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;contains_text&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="s1">&#39;mb_stripos&#39;</span><span class="p">))</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;mb_stripos(&#39;</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="k">return</span> <span class="s1">&#39;stripos(&#39;</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Встроенные функции могут быть перегружены добавлением функций с таким же именем:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Заменяет встроенную функцию &#39;dump&#39;</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFunction</span><span class="p">(</span><span class="s1">&#39;dump&#39;</span><span class="p">,</span> <span class="s1">&#39;print_r&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="id27">
<h3>Фильтры<a class="headerlink" href="#id27" title="Ссылка на этот заголовок">¶</a></h3>
<p>Фильтры имеют следующий вид в шаблоне: leftExpr|name(optional-args). Добавление новых фильтров аналогично добавлению функций:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Создаёт фильтр &#39;hash&#39;, который использует функцию PHP &#39;md5&#39;</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">&#39;hash&#39;</span><span class="p">,</span> <span class="s1">&#39;md5&#39;</span><span class="p">);</span>
</pre></div>
</div>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">&#39;int&#39;</span><span class="p">,</span> <span class="k">function</span><span class="p">(</span><span class="nv">$resolvedArgs</span><span class="p">,</span> <span class="nv">$exprArgs</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="s1">&#39;intval(&#39;</span> <span class="o">.</span> <span class="nv">$resolvedArgs</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
<span class="p">});</span>
</pre></div>
</div>
<p>Встроенные фильтры могут быть перегружены добавлением фильтра с таким же именем:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Replace built-in filter &#39;capitalize&#39;</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addFilter</span><span class="p">(</span><span class="s1">&#39;capitalize&#39;</span><span class="p">,</span> <span class="s1">&#39;lcfirst&#39;</span><span class="p">);</span>
</pre></div>
</div>
</div>
<div class="section" id="extensions">
<h3>Extensions<a class="headerlink" href="#extensions" title="Ссылка на этот заголовок">¶</a></h3>
<p>With extensions the developer has more flexibility to extend the template engine, and override the compilation
of ​a specific instruction, change the behavior of an expression or operator, add functions/filters, and more.</p>
<p>An extension is a class that implements the events triggered by Volt as a method of itself.</p>
<p>For example, the class below allows to use any PHP function in Volt:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="k">class</span> <span class="nc">PhpFunctionExtension</span>
<span class="p">{</span>
    <span class="sd">/**</span>
<span class="sd">     * This method is called on any attempt to compile a function call</span>
<span class="sd">     */</span>
    <span class="k">public</span> <span class="k">function</span> <span class="nf">compileFunction</span><span class="p">(</span><span class="nv">$name</span><span class="p">,</span> <span class="nv">$arguments</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">if</span> <span class="p">(</span><span class="nb">function_exists</span><span class="p">(</span><span class="nv">$name</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">return</span> <span class="nv">$name</span> <span class="o">.</span> <span class="s1">&#39;(&#39;</span><span class="o">.</span> <span class="nv">$arguments</span> <span class="o">.</span> <span class="s1">&#39;)&#39;</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The above class implements the method &#8216;compileFunction&#8217; which is invoked before any attempt to compile a function call in any
template. The purpose of the extension is to verify if a function to be compiled is a PHP function allowing to call it
from the template. Events in extensions must return valid PHP code, this will be used as result of the compilation
instead of the one generated by Volt. If an event doesn&#8217;t return an string the compilation is done using the default
behavior provided by the engine.</p>
<p>The following compilation events are available to be implemented in extensions:</p>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="85%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Event/Method</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>compileFunction</td>
<td>Triggered before trying to compile any function call in a template</td>
</tr>
<tr class="row-odd"><td>compileFilter</td>
<td>Triggered before trying to compile any filter call in a template</td>
</tr>
<tr class="row-even"><td>resolveExpression</td>
<td>Triggered before trying to compile any expression. This allows the developer to override operators</td>
</tr>
<tr class="row-odd"><td>compileStatement</td>
<td>Triggered before trying to compile any expression. This allows the developer to override any statement</td>
</tr>
</tbody>
</table>
<p>Volt extensions must be in registered in the compiler making them available in compile time:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">//Register the extension in the compiler</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">addExtension</span><span class="p">(</span><span class="k">new</span> <span class="nx">PhpFunctionExtension</span><span class="p">());</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id28">
<h2>Кэширование частей представления<a class="headerlink" href="#id28" title="Ссылка на этот заголовок">¶</a></h2>
<p>С помощью Volt легко можно кэшировать части представления. Это повышает производительность, предотвращая выполнение PHP содержимого блока каждый раз, когда он отображается:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">cache</span> <span class="s2">&quot;sidebar&quot;</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- generate this content is slow so we are going to cache it --&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Установка времени жизни кэша на определённое количество секунд:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# кэширование сайдбара на 1 час #}</span>
<span class="cp">{%</span> <span class="k">cache</span> <span class="s2">&quot;sidebar&quot;</span> <span class="m">3600</span> <span class="cp">%}</span>
    <span class="c">&lt;!-- генерация этого содержимого достаточно медленна и мы решили её закэшировать --&gt;</span>
<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>В качестве ключа кэша может быть использовано любое разрешённое выражение:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="cp">{%</span> <span class="k">cache</span> <span class="o">(</span><span class="s2">&quot;article-&quot;</span> <span class="o">~</span> <span class="nv">post.id</span><span class="o">)</span> <span class="m">3600</span> <span class="cp">%}</span>

    <span class="nt">&lt;h1&gt;</span><span class="cp">{{</span> <span class="nv">post.title</span> <span class="cp">}}</span><span class="nt">&lt;/h1&gt;</span>

    <span class="nt">&lt;p&gt;</span><span class="cp">{{</span> <span class="nv">post.content</span> <span class="cp">}}</span><span class="nt">&lt;/p&gt;</span>

<span class="cp">{%</span> <span class="k">endcache</span> <span class="cp">%}</span>
</pre></div>
</div>
<p>Кэширование выполняется компонентом <a class="reference internal" href="cache.html"><em>Phalcon\Cache</em></a> через компонент представления. Узнать больше о том, как это работает можно в разделе <a class="reference internal" href="views.html"><em>&#8220;Caching View Fragments&#8221;</em></a>.</p>
</div>
<div class="section" id="id29">
<h2>Использование сервисов в шаблоне<a class="headerlink" href="#id29" title="Ссылка на этот заголовок">¶</a></h2>
<p>Если контейнер сервисов (DI) доступен для Volt, вы можете использовать сервисы в шаблоне, получая доступ к ним по их именам:</p>
<div class="highlight-html+jinja"><div class="highlight"><pre><span class="c">{# Использование сервиса &#39;flash&#39; #}</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;messages&quot;</span><span class="nt">&gt;</span><span class="cp">{{</span> <span class="nv">flash.output</span><span class="o">()</span> <span class="cp">}}</span><span class="nt">&lt;/div&gt;</span>

<span class="c">{# Использование сервиса &#39;security&#39; #}</span>
<span class="nt">&lt;input</span> <span class="na">type=</span><span class="s">&quot;hidden&quot;</span> <span class="na">name=</span><span class="s">&quot;token&quot;</span> <span class="na">value=</span><span class="s">&quot;</span><span class="cp">{{</span> <span class="nv">security.getToken</span><span class="o">()</span> <span class="cp">}}</span><span class="s">&quot;</span><span class="nt">&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="id30">
<h2>Отдельный компонент<a class="headerlink" href="#id30" title="Ссылка на этот заголовок">¶</a></h2>
<p>Ниже продемонстрировано использование Volt, как отдельного компонента:</p>
<div class="highlight-php"><div class="highlight"><pre><span class="cp">&lt;?php</span>

<span class="c1">// Создание компилятора</span>
<span class="nv">$compiler</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">\Phalcon\Mvc\View\Engine\Volt\Compiler</span><span class="p">();</span>

<span class="c1">// Добавление каких-то опций</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">setOptions</span><span class="p">(</span><span class="k">array</span><span class="p">(</span>
    <span class="c1">//...</span>
<span class="p">));</span>

<span class="c1">// Компиляция шаблона-строки, возвращающая PHP-код</span>
<span class="k">echo</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compileString</span><span class="p">(</span><span class="s1">&#39;{{ &quot;hello&quot; }}&#39;</span><span class="p">);</span>

<span class="c1">// Компиляция шаблона-файла в определённый файл</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compileFile</span><span class="p">(</span><span class="s1">&#39;layouts/main.volt&#39;</span><span class="p">,</span> <span class="s1">&#39;cache/layouts/main.volt.php&#39;</span><span class="p">);</span>

<span class="c1">// Компиляция шаблона-файла, в файл, определённый в настройках, переданных в компилятор</span>
<span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">compile</span><span class="p">(</span><span class="s1">&#39;layouts/main.volt&#39;</span><span class="p">);</span>

<span class="c1">// Запрос собранных шаблонов (по желанию)</span>
<span class="k">require</span> <span class="nv">$compiler</span><span class="o">-&gt;</span><span class="na">getCompiledTemplatePath</span><span class="p">();</span>
</pre></div>
</div>
</div>
<div class="section" id="id31">
<h2>Внешние ресурсы<a class="headerlink" href="#id31" title="Ссылка на этот заголовок">¶</a></h2>
<ul class="simple">
<li>Пакет для Sublime/Textmate можно скачать [<a class="reference external" href="https://github.com/phalcon/volt-sublime-textmate">на Github</a>]</li>
<li><a class="reference external" href="https://github.com/phalcon/album-o-rama">Album-O-Rama</a> — пример приложения, использующего Volt в качестве шаблонизатоа, [<a class="reference external" href="https://github.com/phalcon/album-o-rama">код album-o-rama на Github</a>]</li>
<li><a class="reference external" href="http://phalconphp.com">Наш сайт</a> работает на шаблонизаторе Volt, [<a class="reference external" href="https://github.com/phalcon/website">код website на Github</a>]</li>
<li><a class="reference external" href="http://forum.phalconphp.com">Phosphorum</a>, форум Phalcon так же использует Volt, [<a class="reference external" href="https://github.com/phalcon/forum">код forum на Github</a>]</li>
<li><a class="reference external" href="http://vokuro.phalconphp.com">Vökuró</a>, еще одно приложение с использованием Volt, [<a class="reference external" href="https://github.com/phalcon/vokuro">код vokuro на Github</a>]</li>
</ul>
</div>
</div>


                    </div>
                  </div>
                </div>
            </div>
          </td>
        </tr>
      </table>
    <div class="related">
      <ul>
        <li class="right" >
          <a href="../genindex.html" title="Словарь-указатель"
             >словарь</a></li>
        <li class="right" >
          <a href="applications.html" title="MVC Приложения"
             >следующий</a> |</li>
        <li class="right" >
          <a href="assets.html" title="Управление ресурсами (Assets Management)"
             >предыдущий</a> |</li> 
      </ul>
    </div>
        <div id="footer">

          <p>Нашли ошибку или опечатку? Желаете улучшить этот документ? Исходники русской документации доступны на <a href="http://github.com/phalcon/docs">Github</a></p>
          <p>Нужна помощь или возникли вопросы? Посетите <a href="http://phalconphp.com/ru/support">страницу помощи<</a></p>

          <p>Фреймворк Phalcon PHP распространяется с учетом <a href="https://github.com/phalcon/cphalcon/blob/master/docs/LICENSE.md">new BSD license</a>.</p>
          <p>Кроме случаев, когда указано иное, содержимое на этом сайте, защищено в соответствии с
            <a href="http://creativecommons.org/licenses/by/3.0/">Creative Commons Attribution 3.0 License.</a></p>
             Последнее обновление Oct 21, 2014.
            Создано с использованием <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.

          <p>
             &copy; Copyright 2014, Phalcon Team.
          </p>

            <div class="size-wrap footer-wrap">

                <div class="donate-wrap">
                    Поддержать Phalcon: <a href="http://flattr.com/thing/1134206/Phalcon-PHP-Framework" target="_blank" class="button button-small orange">Flattr</a>
                    или
                    <form action="https://www.paypal.com/cgi-bin/webscr" method="post" style="display: inline">
                        <input type="hidden" name="cmd" value="_s-xclick">
                        <input type="hidden" name="hosted_button_id" value="7LSYMNMFZNG8W">
                        <input class="button button-small orange" style="border: inherit; display: inline; font-weight: bold" type="submit" value="via Paypal" title="PayPal — The safer, easier way to pay online.">
                    </form>
                </div>

                <div class="social-links">
                    <a href="https://twitter.com/phalconphp" class="social-link tw">Twitter</a>
                    <a href="http://www.facebook.com/pages/Phalcon/134230726685897" class="social-link fb">Facebook</a>
                    <a href="https://plus.google.com/102376109340560896457" class="social-link gp">Google Plus</a>
                    <a href="http://vimeo.com/user10964377" class="social-link vm">Vimeo</a>
                </div>

            </div>

        </div>

    </div>
  </body>
</html>