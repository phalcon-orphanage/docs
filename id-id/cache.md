---
layout: article
language: 'id-id'
version: '4.0'
---
##### This article reflects v3.4 and has not yet been revised

{:.alert .alert-danger}

<a name='overview'></a>

# Meningkatkan performa dengan Cache

Phalcon provides the `Phalcon\Cache` class allowing faster access to frequently used or already processed data. `Phalcon\Cache` is written in C, achieving higher performance and reducing the overhead when getting items from the backends. This class uses an internal structure of frontend and backend components. Front-end components act as input sources or interfaces, while backend components offer storage options to the class.

<a name='implementation'></a>

## Kapan menerapkan cache?

Although this component is very fast, implementing it in cases that are not needed could lead to a loss of performance rather than gain. We recommend you check this cases before using a cache:

* Anda membuat perhitungan rumit yang setiap saat mengembalikan hasil yang sama (berubah jarang)
* Anda menggunakan banyak pembantu dan output yang dihasilkan hampir selalu sama
* Anda mengakses data database secara konstan dan data ini jarang berubah

<div class='alert alert-warning'>
    <p>
        <strong>CATATAN</strong> Bahkan setelah menerapkan tembolok, Anda harus memeriksa rasio klik cache Anda selama periode waktu tertentu. Hal ini dapat dengan mudah dilakukan, terutama dalam kasus Men cache atau Apc, dengan alat yang relevan yang diberikan backends.
    </p>
</div>

<a name='caching-behavior'></a>

## Perilaku Caching

The caching process is divided into 2 parts:

* **Frontend**: Bagian ini bertanggung jawab untuk memeriksa apakah kunci telah kedaluwarsa dan melakukan transformasi tambahan ke data sebelum menyimpan dan setelah mengambilnya dari backend-
* **Backend**: Bagian ini bertanggung jawab untuk mengkomunikasikan, menulis/membaca data yang dibutuhkan oleh frontend.

<a name='factory'></a>

## Pabrik

Instantiating frontend or backend adapters can be achieved by two ways:

Traditional way

```php
<?php

gunakan Phalcon\Cache\Backend\File sebagai BackFile;
gunakan Phalcon\Cache\Frontend\Data sebagai FrontData;

// Buat  frontend Output.  Cache file selama 2 hari
$frontCache = new FrontData(
    [
        'lifetime' => 172800,
    ]
);

// Buat komponen yang akan di-cache dari 'Output' menjadi 'File' backend
// Setet direktori file cache - penting untuk menyimpan '/' di penghujung
// nilai untuk folder
$cache = new BackFile(
    $frontCache,
    [
        'cacheDir' => '../app/cache/',
    ]
);
```

or using the Factory object as follows:

```php
<?php

gunakan Phalcon\Cache\Frontend\Factory sebagai FFactory;
gunakan Phalcon\Cache\Backend\Factory sebagai BFactory;

 $options = [
     'lifetime' => 172800,
     'adapter'  => 'data',
 ];
 $frontendCache = FFactory::load($options);


$options = [
    'cacheDir' => '../app/cache/',
    'prefix'   => 'app-data',
    'frontend' => $frontendCache,
    'adapter'  => 'file',
];

$backendCache = BFactory::load($options);
```

<a name='output-fragments'></a>

## Caching Output Fragments

An output fragment is a piece of HTML or text that is cached as is and returned as is. The output is automatically captured from the `ob_*` functions or the PHP output so that it can be saved in the cache. The following example demonstrates such usage. It receives the output generated by PHP and stores it into a file. The contents of the file are refreshed every 172,800 seconds (2 days).

The implementation of this caching mechanism allows us to gain performance by not executing the helper `Phalcon\Tag::linkTo()` call whenever this piece of code is called.

```php
<?php 

gunakan Phalcon\Tag;
gunakan Phalcon\Cache\Backend\File sebagai BackFile;
gunakan Phalcon\Cache\Frontend\Output sebagai FrontOutput;

// Buat frontend Output. Cache berkas ini untuk 2 hari
$frontCache = new  FrontOutput(
    [
        'lifetime' => 172800,
    ]
);

// Buat komponen yang akan di cache dari 'Output' ke 'File' backend
// Atur tempat penyimpanan berkas cache - hal tersebut sangat penting untuk menjaga '/' pada akhir dari
// nilai untuk folder
$cache = new BackFile(
    $frontCache,
    [
        'cacheDir' => '../app/cache/',
    ]
);

Dapatkan/Atur berkas cache ke ../app/cache/my-cache.html
$content = $cache->start('my-cache.html');

// Jika $content tidak ada maka konten akan dipindahkan ke cache
jika ($content === null) {
    //Cetak tanggal dan waktu
    echo date('r);

    // Memindahkan link ke sign-up
    echo Tag::linkTo(
        [
            'user/signup',
            'Sign Up',
            'class' = > 'signup-button',
        ]
    );

    // Simpan output kedalam berkas cache
    $cache->save();
} else {
    // Echo output cache
    echo $content;
}
```

<div class='alert alert-warning'>
    <p>
        <strong>Perhatikan</strong> Pada contoh di atas, kode kita tetap sama, menggema output ke pengguna seperti yang telah dilakukan sebelumnya. Komponen cache kami secara transparan menangkap output itu dan menyimpannya di berkas cache (saat cache dihasilkan) atau mengirimkannya kembali ke pengguna yang telah dikompilasi sebelumnya dari panggilan sebelumnya, sehingga menghindari operasi yang mahal.
    </p>
</div>

<a name='arbitrary-data'></a>

## Caching data sewenang-wenang

Caching just data is equally important for your application. Caching can reduce database load by reusing commonly used (but not updated) data, thus speeding up your application.

<a name='backend-file-example'></a>

### Contoh File Backend

One of the caching adapters is `File`. The only key area for this adapter is the location of where the cache files will be stored. This is controlled by the `cacheDir` option which *must* have a backslash at the end of it.

```php
<?php

menggunakan ehalcon\Cache\Backend\File sebagai BackFile;
menggunakan Phalcon\Cache\Frontend\Data sebagai FrontData;

// Cache berkas selama 2 hari menggunakan Data frontend
$frontCache = new FrontData(
    [
        'lifetime' => 172800,
    ]
);

// Membuat komponen yang akan di cache dari 'Data' ke 'File' backend
// Atur tempat penyimpanan cache - penting untuk meletakkan `/` pada akhir
// nilai untuk berkas
$cache = new BackFile(
    $frontCache,
    [
        'cacheDir' => '../app/cache/',
    ]
);

$cacheKey = 'robots_order_id.cache';

// Mencoba untuk mendapatkan catatan cache
$robots = $cache->get($cacheKey);

if ($robots === null) {
    // $robots masih null karena cache expiration atau data tidak ada
    // Membuat panggilan database dan mengisi variabel
    $robots = Robots::find(
        [
            'order' => 'id',
        ]
    );

    // Simpan kedalam cache
    $cache->save($cacheKey, $robots);
}

// Menggunakan $robots :)
foreach ($robots as $robot) {
   echo $robot->name, '\n';
}
```

<a name='backend-memcached-example'></a>

### Contoh

The above example changes slightly (especially in terms of configuration) when we are using a Memcached backend.

```php
<?php

gunakan Phalcon\Cache\Frontend\Data sebagai FrontData;
gunakan Phalcon\Cache\Backend\Libmemcached sebagai BackMemCached;

// Cache data selama satu jam
$frontCache = new FrontData(
    [
        'lifetime' => 3600,
    ]
);

// Membuat komponen yang akan di cache dari 'Data' ke 'Memchached' backend
// Pengaturan koneksi Memcached
$cache = new BackMemCached(
    $frontCache,
    [
        'servers' => [
            [
                'host'   => '127.0.0.1',
                'port'   => '11211',
                'weight' => '1',
            ]
        ]
    ]
);

$cacheKey = 'robots_order_id.cache';

// Mencoba untuk mendapatkan catatan cache
$robots = $cache->get($cacheKey);

if ($robots === null) {
    // $robots masih null karena cache expiration atau data tidak ada
    // Membuat panggilan database dan mengisi variabel
    $robots = Robots::find(
        [
            'order' => 'id',
        ]
    );

    // Simpan kedalam cache
    $cache->save($cacheKey, $robots);
}

// Menggunakan $robots :)
foreach ($robots as $robot) {
   echo $robot->name, '\n';
}
```

<div class='alert alert-warning'>
    <p>
        <strong>CATATAN</strong> Panggilan <code>simpan()</code> akan mengembalikan boolean, menunjukkan kesuksesan (<code>benar</code>) atau kegagaln (<code>salah</code>). Bergantung pada backend yang Anda gunakan, Anda perlu melihat log yang sesuai untuk mengidentifikasi kegagalan.
    </p>
</div>

<a name='read'></a>

## Memeriksa cache

The elements added to the cache are uniquely identified by a key. In the case of the File backend, the key is the actual filename. To retrieve data from the cache, we just have to call it using the unique key. If the key does not exist, the get method will return null.

```php
<?php 

// Ambil produk dengan kunci 'myProducts'
 $products = $cache->dapatkan('myProducts');
```

If you want to know which keys are stored in the cache you could call the `queryKeys` method:

```php
<?php

// Query seluruh keys yang digunakan di dalam cache
$keys = $cache->queryKeys();

foreach ($keys as $key) {
    $data = $cache->get($key);

    echo 'Key=', $key, ' Data=', $data;
}

// Query keys yang berada di dalam cache diawali dengan 'my-prefix'
$keys = $cache->queryKeys('my-prefix');
```

<a name='delete'></a>

## Menghapus data dari cache

There are times where you will need to forcibly invalidate a cache entry (due to an update in the cached data). The only requirement is to know the key that the data have been stored with.

```php
<?php

// Hapus item dengan kata kunci tertentu
$cache->delete('someKey');

$keys = $cache->queryKeys();

// Hapus semua item yang ada didalam cache
foreach ($keys as $key) {
    $cache->delete($key);
}
```

<a name='exists'></a>

## Memeriksa keberadaan cache

It is possible to check if a cache already exists with a given key:

```php
<?php

if ($cache->exists('someKey')) {
    echo $cache->get('someKey');
} else {
    echo 'Cache tidak ada!';
}
```

<a name='lifetime'></a>

## Seumur hidup

A `lifetime` is a time in seconds that a cache could live without expire. By default, all the created caches use the lifetime set in the frontend creation. You can set a specific lifetime in the creation or retrieving of the data from the cache:

Setting the lifetime when retrieving:

```php
<?php

$cacheKey = 'my.cache';

// Setting cache ketika mendapatkan hasil
$robots = $cache->get($cacheKey, 3600);

if ($robots === null) {
    $robots = 'some robots';

    // Simpan ke dalam cache
    $cache->save($cacheKey, $robots);
}
```

Setting the lifetime when saving:

```php
<?php

$cacheKey = 'my.cache';

$robots = $cache->get($cacheKey);

if ($robots === null) {
    $robots = 'some robots';

    // Pengaturan cache untuk menyimpan data
    $cache->save($cacheKey, $robots, 3600);
}
```

<a name='multi-level'></a>

## Multi-Level Cache

This feature of the cache component, allows the developer to implement a multi-level cache. This new feature is very useful because you can save the same data in several cache locations with different lifetimes, reading first from the one with the faster adapter and ending with the slowest one until the data expires:

```php
<?php

menggunakan Phalcon\Cache\Multiple;
menggunakan Phalcon\Cache\Backend\Apc sebagai ApcCache;
menggunakan Phalcon\Cache\Backend\File sebagai FileCache;
menggunakan Phalcon\Cache\Frontend\Data sebagai DataFrontend;
menggunakan Phalcon\Cache\Backend\Memcache sebagai MemcacheCache;

$ultraFastFrontend = new DataFrontend(
    [
        'lifetime' => 3600,
    ]
);

$fastFrontend = new DataFrontend(
    [
        'lifetime' => 86400,
    ]
);

$slowFrontend = new DataFrontend(
    [
        'lifetime' => 604800,
    ]
);

// Backends telah terdaftar dari fastest sampai ke slower
$cache = new Multiple(
    [
        new ApcCache(
            $ultraFastFrontend,
            [
                'prefix' => 'cache',
            ]
        ),
        new MemcacheCache(
            $fastFrontend,
            [
                'prefix' => 'cache',
                'host'   => 'localhost',
                'port'   => '11211',
            ]
        ),
        new FileCache(
            $slowFrontend,
            [
                'prefix'   => 'cache',
                'cacheDir' => '../app/cache/',
            ]
        ),
    ]
);

// Simpan, simpan disetiap backend
$cache->save('my-key', $data);
```

<a name='adapters-frontend'></a>

## Adapter ujung depan

The available frontend adapters that are used as interfaces or input sources to the cache are:

| Adaptor                                                                   | Deskripsi                                                                                                                                                      |
| ------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Phalcon\Cache\Frontend\Output](api/Phalcon_Cache_Frontend_Output)     | Baca data input dari output PHP standar.                                                                                                                       |
| [Phalcon\Cache\Frontend\Data](api/Phalcon_Cache_Frontend_Data)         | It's used to cache any kind of PHP data (big arrays, objects, text, etc). Data is serialized before stored in the backend.                                     |
| [Phalcon\Cache\Frontend\Data](api/Phalcon_Cache_Frontend_Base64)       | It's used to cache binary data. The data is serialized using `base64_encode` before be stored in the backend.                                                  |
| [Phalcon\Cache\Frontend\Json](api/Phalcon_Cache_Frontend_Json)         | Data is encoded in JSON before be stored in the backend. Decoded after be retrieved. This frontend is useful to share data with other languages or frameworks. |
| [Phalcon\Cache\Frontend\Igbinary](api/Phalcon_Cache_Frontend_Igbinary) | It's used to cache any kind of PHP data (big arrays, objects, text, etc). Data is serialized using `Igbinary` before be stored in the backend.                 |
| [Phalcon\Cache\Frontend\Json](api/Phalcon_Cache_Frontend_None)         | Ini digunakan untuk menyimpan semua jenis data PHP tanpa membuat cerita mereka.                                                                                |

<a name='adapters-frontend-custom'></a>

### Menerapkan adapter Frontend Anda sendiri

The [Phalcon\Cache\FrontendInterface](api/Phalcon_Cache_FrontendInterface) interface must be implemented in order to create your own frontend adapters or extend the existing ones.

<a name='adapters-backend'></a>

## Adaptor ujung belakang

The backend adapters available to store cache data are:

| Adaptor                                                                         | Deskripsi                                         | Info                                       | Diperlukan Ekstensi                                 |
| ------------------------------------------------------------------------------- | ------------------------------------------------- | ------------------------------------------ | --------------------------------------------------- |
| [Phalcon\Cache\Backend\Apc](api/Phalcon_Cache_Backend_Apc)                   | Menyimpan data ke Alternative PHP Cache (APC).    | [APC](https://php.net/apc)                 | [APC](https://pecl.php.net/package/APC)             |
| `Phalcon\Cache\Backend\Apcu`                                                 | Menyimpan data ke APCu (APC tanpa opcode caching) | [APcu](https://php.net/apcu)               | [APcu](https://pecl.php.net/package/APCu)           |
| [Phalcon\Cache\Backend\File](api/Phalcon_Cache_Backend_File)                 | Menyimpan data ke file polos lokal.               |                                            |                                                     |
| [Phalcon\Cache\Backend\Libmemcached](api/Phalcon_Cache_Backend_Libmemcached) | Menyimpan data ke server memcached.               | [Memcached](https://www.php.net/memcached) | [Memcached](https://pecl.php.net/package/memcached) |
| [Phalcon\Cache\Paling Belakang\Memcache](api/Phalcon_Cache_Backend_Memcache) | Menyimpan data ke server memcached.               | [Memcache](https://www.php.net/memcache)   | [Memcache](https://pecl.php.net/package/memcache)   |
| [Phalcon\Cache\Belakang\Memory](api/Phalcon_Cache_Backend_Memory)            | Stores data in memory                             |                                            |                                                     |
| [Phalcon\Cache\Belakang\Mongo](api/Phalcon_Cache_Backend_Mongo)              | Stores data to Mongo Database.                    | [MongoDB](https://mongodb.org/)            | [Mongo](https://mongodb.org/)                       |
| [Phalcon\Cache\Belakang\Redis](api/Phalcon_Cache_Backend_Redis)              | Stores data in Redis.                             | [Redis](https://redis.io/)                 | [Redis](https://pecl.php.net/package/redis)         |
| [Phalcon\Cache\Belakang\Xcache](api/Phalcon_Cache_Backend_Xcache)            | Stores data in XCache.                            | [XCache](https://xcache.lighttpd.net/)     | [XCache](https://pecl.php.net/package/xcache)       |

##### **NOTE** In PHP 7 to use phalcon `apc` based adapter classes you needed to install `apcu` and `apcu_bc` package from pecl. Now in Phalcon 4.0.0 you can switch your `<em>\Apc` classes to `</em>\Apcu` and remove `apcu_bc`. Keep in mind that in Phalcon 4 we will most likely remove all `*\Apc` classes. {.alert.alert-warning}

<a name='adapters-backend-factory'></a>

### Pabrik

There are many backend adapters (see [Backend Adapters](#adapters-backend)). Yang Anda gunakan akan tergantung pada kebutuhan aplikasi Anda. The following example loads the Backend Cache Adapter class using `adapter` option, if frontend will be provided as array it will call Frontend Cache Factory

```php
<?php

use Phalcon\Cache\Backend\Factory;
use Phalcon\Cache\Frontend\Data;

$options = [
    'prefix'   => 'app-data',
    'frontend' => new Data(),
    'adapter'  => 'apc',
];
$backendCache = Factory::load($options);
```

<a name='adapters-backend-custom'></a>

### Menerapkan adaptor Backend Anda sendiri

The [Phalcon\Cache\BackendInterface](api/Phalcon_Cache_BackendInterface) interface must be implemented in order to create your own backend adapters or extend the existing ones.

<a name='adapters-backend-file'></a>

### Pilihan Berkas Backend

This backend will store cached content into files in the local server. The available options for this backend are:

| Pilihan    | Deskripsi                                                         |
| ---------- | ----------------------------------------------------------------- |
| `awalan`   | Awalan yang secara otomatis ditambahkan ke kunci cache.           |
| `cacheDir` | Direktori yang dapat ditulis di mana file cache akan ditempatkan. |

<a name='adapters-backend-libmemcached'></a>

### Pilihan Backend Libmemcached

This backend will store cached content on a memcached server. Per default persistent memcached connection pools are used. The available options for this backend are:

**General options**

| Pilihan           | Deskripsi                                                                                                                        |
| ----------------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `statistik kunci` | Digunakan untuk melacak kunci cache.                                                                                             |
| `awalan`          | Awalan yang secara otomatis ditambahkan ke kunci cache.                                                                          |
| `persistent_id`   | Untuk membuat sebuah instance yang berlanjut antara permintaan, gunakan `persistent_id` untuk menentukan ID unik untuk instance. |

**Servers options**

| Pilihan | Deskripsi                                                                                                                        |
| ------- | -------------------------------------------------------------------------------------------------------------------------------- |
| `host`  | The `memcached` tuan rumah.                                                                                                      |
| `port`  | The `memcached` pelabuhan.                                                                                                       |
| `berat` | Parameter bobot mempengaruhi hashing konsisten yang digunakan untuk menentukan server mana yang bisa membaca/menulis kunci dari. |

**Client options**

Used for setting Memcached options. See [Memcached::setOptions](https://php.net/manual/en/memcached.setoptions.php) for more.

**Contoh**

```php
<?php
use Phalcon\Cache\Backend\Libmemcached;
use Phalcon\Cache\Frontend\Data as FrontData;

// Cache data for 2 days
$frontCache = new FrontData(
    [
        'lifetime' => 172800,
    ]
);

// Create the Cache setting memcached connection options
$cache = new Libmemcached(
    $frontCache,
    [
        'servers' => [
            [
                'host'   => '127.0.0.1',
                'port'   => 11211,
                'weight' => 1,
            ],
        ],
        'client' => [
            \Memcached::OPT_HASH       => \Memcached::HASH_MD5,
            \Memcached::OPT_PREFIX_KEY => 'prefix.',
        ],
        'persistent_id' => 'my_app_cache',
    ]
);
```

<a name='adapters-backend-memcache'></a>

### Memanggil Pilihan Punggung

This backend will store cached content on a memcached server. The available options for this backend are:

| Pilihan  | Deskripsi                                               |
| -------- | ------------------------------------------------------- |
| `awalan` | Awalan yang secara otomatis ditambahkan ke kunci cache. |
| `host`   | Host memcached                                          |
| `port`   | Port memcached                                          |
| `gigih`  | Buat koneksi yang gigih untuk memcached?                |

<a name='adapters-backend-apc'></a>

### Pilihan Backend APC

This backend will store cached content on Alternative PHP Cache ([APC](https://php.net/apc)). The available options for this backend are:

| Pilihan  | Deskripsi                                               |
| -------- | ------------------------------------------------------- |
| `awalan` | Awalan yang secara otomatis ditambahkan ke kunci cache. |

<a name='adapters-backend-apcu'></a>

### Pilihan Backend APCU

This backend will store cached content on Alternative PHP Cache ([APCU](https://php.net/apcu)). The available options for this backend are:

| Pilihan  | Deskripsi                                               |
| -------- | ------------------------------------------------------- |
| `awalan` | Awalan yang secara otomatis ditambahkan ke kunci cache. |

<a name='adapters-backend-mongo'></a>

### Pilihan Backend Apcu

This backend will store cached content on a MongoDB server ([MongoDB](https://mongodb.org/)). The available options for this backend are:

| Pilihan   | Deskripsi                                               |
| --------- | ------------------------------------------------------- |
| `awalan`  | Awalan yang secara otomatis ditambahkan ke kunci cache. |
| `server`  | String koneksi MongoDB.                                 |
| `db`      | Nama database Mongo.                                    |
| `koleksi` | Koleksi Mongo pada database.                            |

<a name='adapters-backend-xcache'></a>

### Xpilihan Cache Backend

This backend will store cached content on XCache ([XCache](https://xcache.lighttpd.net/)). The available options for this backend are:

| Pilihan  | Deskripsi                                               |
| -------- | ------------------------------------------------------- |
| `awalan` | Awalan yang secara otomatis ditambahkan ke kunci cache. |

<a name='adapters-backend-redis'></a>

### Pilihan Reden Backend

This backend will store cached content on a Redis server ([Redis](https://redis.io/)). The available options for this backend are:

| Pilihan  | Deskripsi                                                                 |
| -------- | ------------------------------------------------------------------------- |
| `awalan` | Awalan yang secara otomatis ditambahkan ke kunci cache.                   |
| `host`   | Redis host.                                                               |
| `port`   | Port redis                                                                |
| `auth`   | Password untuk mengotentikasi ke server Redis yang dilindungi kata sandi. |
| `gigih`  | Buat koneksi yang gigih ke Redis.                                         |
| `indeks` | Indeks database Redis untuk digunakan.                                    |

There are more adapters available for this components in the [Phalcon Incubator](https://github.com/phalcon/incubator)